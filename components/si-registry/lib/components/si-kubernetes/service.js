"use strict";

var _registry = require("../../registry");

_registry.registry.componentAndEntity({
  typeName: "kubernetesService",
  displayTypeName: "Kubernetes Service Object",
  siPathName: "si-kubernetes",
  serviceName: "kubernetes",
  options: function options(c) {
    c.entity.associations.belongsTo({
      fromFieldPath: ["siProperties", "billingAccountId"],
      typeName: "billingAccount"
    });
    c.entity.integrationServices.push({
      integrationName: "aws",
      integrationServiceName: "eks_kubernetes"
    }); // Constraints
    //
    // TODO(fnicho): this should be a common enum across all AWS/EKS related
    // objects

    c.constraints.addEnum({
      name: "kubernetesVersion",
      label: "Kubernetes Version",
      options: function options(p) {
        p.variants = ["v1.12", "v1.13", "v1.14", "v1.15"];
        p.baseDefaultValue = "v1.15";
      }
    }); // Properties

    c.properties.addObject({
      name: "kubernetesObject",
      label: "Kubernetes Object",
      options: function options(p) {
        p.relationships.updates({
          partner: {
            typeName: "kubernetesServiceEntity",
            names: ["properties", "kubernetesObjectYaml"]
          }
        });
        p.relationships.either({
          partner: {
            typeName: "kubernetesServiceEntity",
            names: ["properties", "kubernetesObjectYaml"]
          }
        });
        p.properties.addText({
          name: "apiVersion",
          label: "API Version",
          options: function options(p) {
            p.required = true;
          }
        });
        p.properties.addText({
          name: "kind",
          label: "Kind",
          options: function options(p) {
            p.required = true;
            p.baseDefaultValue = "Service";
          }
        });
        p.properties.addLink({
          name: "metadata",
          label: "Metadat",
          options: function options(p) {
            p.lookup = {
              typeName: "kubernetesMetadata"
            };
          }
        });
        p.properties.addObject({
          name: "spec",
          label: "Service Spec",
          options: function options(p) {
            // TODO(fnichol): The specification records this field in YAML as
            // `clusterIP`
            p.properties.addText({
              name: "clusterIp",
              label: "Host IP"
            }); // TODO(fnichol): The specification records this field in YAML as
            // `externalIPs`

            p.properties.addText({
              name: "externalIps",
              label: "External IPs",
              options: function options(p) {
                p.repeated = true;
              }
            });
            p.properties.addText({
              name: "externalName",
              label: "External Name"
            });
            p.properties.addEnum({
              name: "externalTrafficPolicy",
              label: "External Traffic Policy",
              options: function options(p) {
                p.variants = ["Local", "Cluster"];
              }
            });
            p.properties.addNumber({
              name: "healthCheckNodePort",
              label: "Health Check Node Port",
              options: function options(p) {
                p.numberKind = "uint32";
              }
            });
            p.properties.addEnum({
              name: "ipFamily",
              label: "IP Family",
              options: function options(p) {
                p.variants = ["IPv4", "IPv6"];
              }
            }); // TODO(fnichol); The specification records this field in YAML as
            // `LoadBalancerIP`

            p.properties.addText({
              name: "loadBalancerIp",
              label: "Load Balancer IP"
            });
            p.properties.addText({
              name: "loadBalancerSourceRanges",
              label: "Load Balancer Source Ranges",
              options: function options(p) {
                p.repeated = true;
              }
            });
            p.properties.addLink({
              name: "ports",
              label: "Ports",
              options: function options(p) {
                p.repeated = true;
                p.lookup = {
                  typeName: "kubernetesServicePort"
                };
              }
            });
            p.properties.addBool({
              name: "publishNotReadyAddress",
              label: "Publish Not Ready Address",
              options: function options(p) {
                p.baseDefaultValue = false;
              }
            });
            p.properties.addLink({
              name: "selector",
              label: "Selector",
              options: function options(p) {
                p.lookup = {
                  typeName: "kubernetesSelector"
                };
              }
            });
            p.properties.addEnum({
              name: "sessionAffinity",
              label: "Session Affinity",
              options: function options(p) {
                p.variants = ["ClientIP", "None"];
                p.baseDefaultValue = "None";
              }
            });
            p.properties.addObject({
              name: "sessionAffinityConfig",
              label: "Session Affinity Config",
              options: function options(p) {
                // TODO(fnichol): The specification records this field in YAML
                // as `clientIP`
                p.properties.addObject({
                  name: "clientIp",
                  label: "Client IP Config",
                  options: function options(p) {
                    p.properties.addNumber({
                      name: "timeoutSeconds",
                      label: "Timeout Seconds",
                      options: function options(p) {
                        p.numberKind = "uint32"; // Default is 3 hours

                        p.baseDefaultValue = "10800";
                      }
                    });
                  }
                });
              }
            });
            p.properties.addText({
              name: "topologyKeys",
              label: "Topology Keys",
              options: function options(p) {
                p.repeated = true;
              }
            });
            p.properties.addEnum({
              name: "type",
              label: "Type",
              options: function options(p) {
                p.variants = ["ExternalName", "ClusterIP", "NodePort", "LoadBalancer"];
                p.baseDefaultValue = "ClusterIP";
              }
            });
          }
        });
        p.properties.addObject({
          name: "status",
          label: "Service Status",
          options: function options(p) {
            p.properties.addLink({
              name: "loadBalancer",
              label: "Load Balancer Status",
              options: function options(p) {
                p.lookup = {
                  typeName: "kubernetesLoadBalancerStatus"
                };
              }
            });
          }
        });
      }
    });
    c.properties.addCode({
      name: "kubernetesObjectYaml",
      label: "Kubernetes Object YAML",
      options: function options(p) {
        p.relationships.updates({
          partner: {
            typeName: "kubernetesServiceEntity",
            names: ["properties", "kubernetesObject"]
          }
        });
        p.relationships.either({
          partner: {
            typeName: "kubernetesServiceEntity",
            names: ["properties", "kubernetesObject"]
          }
        });
        p.language = "yaml";
      }
    });
  }
});

_registry.registry.base({
  typeName: "kubernetesServicePort",
  displayTypeName: "Kubernetes Service Port",
  serviceName: "kubernetes",
  options: function options(c) {
    c.fields.addText({
      name: "appProtocol",
      label: "App Protocol"
    });
    c.fields.addText({
      name: "name",
      label: "Name"
    });
    c.fields.addNumber({
      name: "nodePort",
      label: "Node Port",
      options: function options(p) {
        p.numberKind = "uint32";
      }
    });
    c.fields.addNumber({
      name: "port",
      label: "Port",
      options: function options(p) {
        p.numberKind = "uint32";
      }
    });
    c.fields.addEnum({
      name: "protocol",
      label: "Protocol",
      options: function options(p) {
        p.variants = ["TCP", "UDP", "SCTP"];
        p.baseDefaultValue = "TCP";
      }
    }); // NOTE: "Number or name of the port...", implying either an integer or
    // string name. ugh.

    c.fields.addText({
      name: "targetPort",
      label: "Target Port"
    });
  }
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy9jb21wb25lbnRzL3NpLWt1YmVybmV0ZXMvc2VydmljZS50cyJdLCJuYW1lcyI6WyJyZWdpc3RyeSIsImNvbXBvbmVudEFuZEVudGl0eSIsInR5cGVOYW1lIiwiZGlzcGxheVR5cGVOYW1lIiwic2lQYXRoTmFtZSIsInNlcnZpY2VOYW1lIiwib3B0aW9ucyIsImMiLCJlbnRpdHkiLCJhc3NvY2lhdGlvbnMiLCJiZWxvbmdzVG8iLCJmcm9tRmllbGRQYXRoIiwiaW50ZWdyYXRpb25TZXJ2aWNlcyIsInB1c2giLCJpbnRlZ3JhdGlvbk5hbWUiLCJpbnRlZ3JhdGlvblNlcnZpY2VOYW1lIiwiY29uc3RyYWludHMiLCJhZGRFbnVtIiwibmFtZSIsImxhYmVsIiwicCIsInZhcmlhbnRzIiwiYmFzZURlZmF1bHRWYWx1ZSIsInByb3BlcnRpZXMiLCJhZGRPYmplY3QiLCJyZWxhdGlvbnNoaXBzIiwidXBkYXRlcyIsInBhcnRuZXIiLCJuYW1lcyIsImVpdGhlciIsImFkZFRleHQiLCJyZXF1aXJlZCIsImFkZExpbmsiLCJsb29rdXAiLCJyZXBlYXRlZCIsImFkZE51bWJlciIsIm51bWJlcktpbmQiLCJhZGRCb29sIiwiYWRkQ29kZSIsImxhbmd1YWdlIiwiYmFzZSIsImZpZWxkcyJdLCJtYXBwaW5ncyI6Ijs7QUFTQTs7QUFFQUEsbUJBQVNDLGtCQUFULENBQTRCO0FBQzFCQyxFQUFBQSxRQUFRLEVBQUUsbUJBRGdCO0FBRTFCQyxFQUFBQSxlQUFlLEVBQUUsMkJBRlM7QUFHMUJDLEVBQUFBLFVBQVUsRUFBRSxlQUhjO0FBSTFCQyxFQUFBQSxXQUFXLEVBQUUsWUFKYTtBQUsxQkMsRUFBQUEsT0FMMEIsbUJBS2xCQyxDQUxrQixFQUtmO0FBQ1RBLElBQUFBLENBQUMsQ0FBQ0MsTUFBRixDQUFTQyxZQUFULENBQXNCQyxTQUF0QixDQUFnQztBQUM5QkMsTUFBQUEsYUFBYSxFQUFFLENBQUMsY0FBRCxFQUFpQixrQkFBakIsQ0FEZTtBQUU5QlQs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O0FBSUQ7QUF6Q1csQ0FBZCIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7XG4gIFByb3BCb29sLFxuICBQcm9wQ29kZSxcbiAgUHJvcEVudW0sXG4gIFByb3BMaW5rLFxuICBQcm9wTnVtYmVyLFxuICBQcm9wT2JqZWN0LFxuICBQcm9wVGV4dCxcbn0gZnJvbSBcIi4uLy4uL2NvbXBvbmVudHMvcHJlbHVkZVwiO1xuaW1wb3J0IHsgcmVnaXN0cnkgfSBmcm9tIFwiLi4vLi4vcmVnaXN0cnlcIjtcblxucmVnaXN0cnkuY29tcG9uZW50QW5kRW50aXR5KHtcbiAgdHlwZU5hbWU6IFwia3ViZXJuZXRlc1NlcnZpY2VcIixcbiAgZGlzcGxheVR5cGVOYW1lOiBcIkt1YmVybmV0ZXMgU2VydmljZSBPYmplY3RcIixcbiAgc2lQYXRoTmFtZTogXCJzaS1rdWJlcm5ldGVzXCIsXG4gIHNlcnZpY2VOYW1lOiBcImt1YmVybmV0ZXNcIixcbiAgb3B0aW9ucyhjKSB7XG4gICAgYy5lbnRpdHkuYXNzb2NpYXRpb25zLmJlbG9uZ3NUbyh7XG4gICAgICBmcm9tRmllbGRQYXRoOiBbXCJzaVByb3BlcnRpZXNcIiwgXCJiaWxsaW5nQWNjb3VudElkXCJdLFxuICAgICAgdHlwZU5hbWU6IFwiYmlsbGluZ0FjY291bnRcIixcbiAgICB9KTtcbiAgICBjLmVudGl0eS5pbnRlZ3JhdGlvblNlcnZpY2VzLnB1c2goe1xuICAgICAgaW50ZWdyYXRpb25OYW1lOiBcImF3c1wiLFxuICAgICAgaW50ZWdyYXRpb25TZXJ2aWNlTmFtZTogXCJla3Nfa3ViZXJuZXRlc1wiLFxuICAgIH0pO1xuXG4gICAgLy8gQ29uc3RyYWludHNcbiAgICAvL1xuICAgIC8vIFRPRE8oZm5pY2hvKTogdGhpcyBzaG91bGQgYmUgYSBjb21tb24gZW51bSBhY3Jvc3MgYWxsIEFXUy9FS1MgcmVsYXRlZFxuICAgIC8vIG9iamVjdHNcbiAgICBjLmNvbnN0cmFpbnRzLmFkZEVudW0oe1xuICAgICAgbmFtZTogXCJrdWJlcm5ldGVzVmVyc2lvblwiLFxuICAgICAgbGFiZWw6IFwiS3ViZXJuZXRlcyBWZXJzaW9uXCIsXG4gICAgICBvcHRpb25zKHA6IFByb3BFbnVtKSB7XG4gICAgICAgIHAudmFyaWFudHMgPSBbXCJ2MS4xMlwiLCBcInYxLjEzXCIsIFwidjEuMTRcIiwgXCJ2MS4xNVwiXTtcbiAgICAgICAgcC5iYXNlRGVmYXVsdFZhbHVlID0gXCJ2MS4xNVwiO1xuICAgICAgfSxcbiAgICB9KTtcblxuICAgIC8vIFByb3BlcnRpZXNcbiAgICBjLnByb3BlcnRpZXMuYWRkT2JqZWN0KHtcbiAgICAgIG5hbWU6IFwia3ViZXJuZXRlc09iamVjdFwiLFxuICAgICAgbGFiZWw6IFwiS3ViZXJuZXRlcyBPYmplY3RcIixcbiAgICAgIG9wdGlvbnMocDogUHJvcE9iamVjdCkge1xuICAgICAgICBwLnJlbGF0aW9uc2hpcHMudXBkYXRlcyh7XG4gICAgICAgICAgcGFydG5lcjoge1xuICAgICAgICAgICAgdHlwZU5hbWU6IFwia3ViZXJuZXRlc1NlcnZpY2VFbnRpdHlcIixcbiAgICAgICAgICAgIG5hbWVzOiBbXCJwcm9wZXJ0aWVzXCIsIFwia3ViZXJuZXRlc09iamVjdFlhbWxcIl0sXG4gICAgICAgICAgfSxcbiAgICAgICAgfSk7XG4gICAgICAgIHAucmVsYXRpb25zaGlwcy5laXRoZXIoe1xuICAgICAgICAgIHBhcnRuZXI6IHtcbiAgICAgICAgICAgIHR5cGVOYW1lOiBcImt1YmVybmV0ZXNTZXJ2aWNlRW50aXR5XCIsXG4gICAgICAgICAgICBuYW1lczogW1wicHJvcGVydGllc1wiLCBcImt1YmVybmV0ZXNPYmplY3RZYW1sXCJdLFxuICAgICAgICAgIH0sXG4gICAgICAgIH0pO1xuICAgICAgICBwLnByb3BlcnRpZXMuYWRkVGV4dCh7XG4gICAgICAgICAgbmFtZTogXCJhcGlWZXJzaW9uXCIsXG4gICAgICAgICAgbGFiZWw6IFwiQVBJIFZlcnNpb25cIixcbiAgICAgICAgICBvcHRpb25zKHA6IFByb3BUZXh0KSB7XG4gICAgICAgICAgICBwLnJlcXVpcmVkID0gdHJ1ZTtcbiAgICAgICAgICB9LFxuICAgICAgICB9KTtcbiAgICAgICAgcC5wcm9wZXJ0aWVzLmFkZFRleHQoe1xuICAgICAgICAgIG5hbWU6IFwia2luZFwiLFxuICAgICAgICAgIGxhYmVsOiBcIktpbmRcIixcbiAgICAgICAgICBvcHRpb25zKHA6IFByb3BUZXh0KSB7XG4gICAgICAgICAgICBwLnJlcXVpcmVkID0gdHJ1ZTtcbiAgICAgICAgICAgIHAuYmFzZURlZmF1bHRWYWx1ZSA9IFwiU2VydmljZVwiO1xuICAgICAgICAgIH0sXG4gICAgICAgIH0pO1xuICAgICAgICBwLnByb3BlcnRpZXMuYWRkTGluayh7XG4gICAgICAgICAgbmFtZTogXCJtZXRhZGF0YVwiLFxuICAgICAgICAgIGxhYmVsOiBcIk1ldGFkYXRcIixcbiAgICAgICAgICBvcHRpb25zKHA6IFByb3BMaW5rKSB7XG4gICAgICAgICAgICBwLmxvb2t1cCA9IHtcbiAgICAgICAgICAgICAgdHlwZU5hbWU6IFwia3ViZXJuZXRlc01ldGFkYXRhXCIsXG4gICAgICAgICAgICB9O1xuICAgICAgICAgIH0sXG4gICAgICAgIH0pO1xuICAgICAgICBwLnByb3BlcnRpZXMuYWRkT2JqZWN0KHtcbiAgICAgICAgICBuYW1lOiBcInNwZWNcIixcbiAgICAgICAgICBsYWJlbDogXCJTZXJ2aWNlIFNwZWNcIixcbiAgICAgICAgICBvcHRpb25zKHA6IFByb3BPYmplY3QpIHtcbiAgICAgICAgICAgIC8vIFRPRE8oZm5pY2hvbCk6IFRoZSBzcGVjaWZpY2F0aW9uIHJlY29yZHMgdGhpcyBmaWVsZCBpbiBZQU1MIGFzXG4gICAgICAgICAgICAvLyBgY2x1c3RlcklQYFxuICAgICAgICAgICAgcC5wcm9wZXJ0aWVzLmFkZFRleHQoe1xuICAgICAgICAgICAgICBuYW1lOiBcImNsdXN0ZXJJcFwiLFxuICAgICAgICAgICAgICBsYWJlbDogXCJIb3N0IElQXCIsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIC8vIFRPRE8oZm5pY2hvbCk6IFRoZSBzcGVjaWZpY2F0aW9uIHJlY29yZHMgdGhpcyBmaWVsZCBpbiBZQU1MIGFzXG4gICAgICAgICAgICAvLyBgZXh0ZXJuYWxJUHNgXG4gICAgICAgICAgICBwLnByb3BlcnRpZXMuYWRkVGV4dCh7XG4gICAgICAgICAgICAgIG5hbWU6IFwiZXh0ZXJuYWxJcHNcIixcbiAgICAgICAgICAgICAgbGFiZWw6IFwiRXh0ZXJuYWwgSVBzXCIsXG4gICAgICAgICAgICAgIG9wdGlvbnMocDogUHJvcFRleHQpIHtcbiAgICAgICAgICAgICAgICBwLnJlcGVhdGVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcC5wcm9wZXJ0aWVzLmFkZFRleHQoe1xuICAgICAgICAgICAgICBuYW1lOiBcImV4dGVybmFsTmFtZVwiLFxuICAgICAgICAgICAgICBsYWJlbDogXCJFeHRlcm5hbCBOYW1lXCIsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHAucHJvcGVydGllcy5hZGRFbnVtKHtcbiAgICAgICAgICAgICAgbmFtZTogXCJleHRlcm5hbFRyYWZmaWNQb2xpY3lcIixcbiAgICAgICAgICAgICAgbGFiZWw6IFwiRXh0ZXJuYWwgVHJhZmZpYyBQb2xpY3lcIixcbiAgICAgICAgICAgICAgb3B0aW9ucyhwOiBQcm9wRW51bSkge1xuICAgICAgICAgICAgICAgIHAudmFyaWFudHMgPSBbXCJMb2NhbFwiLCBcIkNsdXN0ZXJcIl07XG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHAucHJvcGVydGllcy5hZGROdW1iZXIoe1xuICAgICAgICAgICAgICBuYW1lOiBcImhlYWx0aENoZWNrTm9kZVBvcnRcIixcbiAgICAgICAgICAgICAgbGFiZWw6IFwiSGVhbHRoIENoZWNrIE5vZGUgUG9ydFwiLFxuICAgICAgICAgICAgICBvcHRpb25zKHA6IFByb3BOdW1iZXIpIHtcbiAgICAgICAgICAgICAgICBwLm51bWJlcktpbmQgPSBcInVpbnQzMlwiO1xuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBwLnByb3BlcnRpZXMuYWRkRW51bSh7XG4gICAgICAgICAgICAgIG5hbWU6IFwiaXBGYW1pbHlcIixcbiAgICAgICAgICAgICAgbGFiZWw6IFwiSVAgRmFtaWx5XCIsXG4gICAgICAgICAgICAgIG9wdGlvbnMocDogUHJvcEVudW0pIHtcbiAgICAgICAgICAgICAgICBwLnZhcmlhbnRzID0gW1wiSVB2NFwiLCBcIklQdjZcIl07XG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIC8vIFRPRE8oZm5pY2hvbCk7IFRoZSBzcGVjaWZpY2F0aW9uIHJlY29yZHMgdGhpcyBmaWVsZCBpbiBZQU1MIGFzXG4gICAgICAgICAgICAvLyBgTG9hZEJhbGFuY2VySVBgXG4gICAgICAgICAgICBwLnByb3BlcnRpZXMuYWRkVGV4dCh7XG4gICAgICAgICAgICAgIG5hbWU6IFwibG9hZEJhbGFuY2VySXBcIixcbiAgICAgICAgICAgICAgbGFiZWw6IFwiTG9hZCBCYWxhbmNlciBJUFwiLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBwLnByb3BlcnRpZXMuYWRkVGV4dCh7XG4gICAgICAgICAgICAgIG5hbWU6IFwibG9hZEJhbGFuY2VyU291cmNlUmFuZ2VzXCIsXG4gICAgICAgICAgICAgIGxhYmVsOiBcIkxvYWQgQmFsYW5jZXIgU291cmNlIFJhbmdlc1wiLFxuICAgICAgICAgICAgICBvcHRpb25zKHA6IFByb3BUZXh0KSB7XG4gICAgICAgICAgICAgICAgcC5yZXBlYXRlZCA9IHRydWU7XG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHAucHJvcGVydGllcy5hZGRMaW5rKHtcbiAgICAgICAgICAgICAgbmFtZTogXCJwb3J0c1wiLFxuICAgICAgICAgICAgICBsYWJlbDogXCJQb3J0c1wiLFxuICAgICAgICAgICAgICBvcHRpb25zKHA6IFByb3BMaW5rKSB7XG4gICAgICAgICAgICAgICAgcC5yZXBlYXRlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgcC5sb29rdXAgPSB7XG4gICAgICAgICAgICAgICAgICB0eXBlTmFtZTogXCJrdWJlcm5ldGVzU2VydmljZVBvcnRcIixcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBwLnByb3BlcnRpZXMuYWRkQm9vbCh7XG4gICAgICAgICAgICAgIG5hbWU6IFwicHVibGlzaE5vdFJlYWR5QWRkcmVzc1wiLFxuICAgICAgICAgICAgICBsYWJlbDogXCJQdWJsaXNoIE5vdCBSZWFkeSBBZGRyZXNzXCIsXG4gICAgICAgICAgICAgIG9wdGlvbnMocDogUHJvcEJvb2wpIHtcbiAgICAgICAgICAgICAgICBwLmJhc2VEZWZhdWx0VmFsdWUgPSBmYWxzZTtcbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcC5wcm9wZXJ0aWVzLmFkZExpbmsoe1xuICAgICAgICAgICAgICBuYW1lOiBcInNlbGVjdG9yXCIsXG4gICAgICAgICAgICAgIGxhYmVsOiBcIlNlbGVjdG9yXCIsXG4gICAgICAgICAgICAgIG9wdGlvbnMocDogUHJvcExpbmspIHtcbiAgICAgICAgICAgICAgICBwLmxvb2t1cCA9IHtcbiAgICAgICAgICAgICAgICAgIHR5cGVOYW1lOiBcImt1YmVybmV0ZXNTZWxlY3RvclwiLFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHAucHJvcGVydGllcy5hZGRFbnVtKHtcbiAgICAgICAgICAgICAgbmFtZTogXCJzZXNzaW9uQWZmaW5pdHlcIixcbiAgICAgICAgICAgICAgbGFiZWw6IFwiU2Vzc2lvbiBBZmZpbml0eVwiLFxuICAgICAgICAgICAgICBvcHRpb25zKHA6IFByb3BFbnVtKSB7XG4gICAgICAgICAgICAgICAgcC52YXJpYW50cyA9IFtcIkNsaWVudElQXCIsIFwiTm9uZVwiXTtcbiAgICAgICAgICAgICAgICBwLmJhc2VEZWZhdWx0VmFsdWUgPSBcIk5vbmVcIjtcbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcC5wcm9wZXJ0aWVzLmFkZE9iamVjdCh7XG4gICAgICAgICAgICAgIG5hbWU6IFwic2Vzc2lvbkFmZmluaXR5Q29uZmlnXCIsXG4gICAgICAgICAgICAgIGxhYmVsOiBcIlNlc3Npb24gQWZmaW5pdHkgQ29uZmlnXCIsXG4gICAgICAgICAgICAgIG9wdGlvbnMocDogUHJvcE9iamVjdCkge1xuICAgICAgICAgICAgICAgIC8vIFRPRE8oZm5pY2hvbCk6IFRoZSBzcGVjaWZpY2F0aW9uIHJlY29yZHMgdGhpcyBmaWVsZCBpbiBZQU1MXG4gICAgICAgICAgICAgICAgLy8gYXMgYGNsaWVudElQYFxuICAgICAgICAgICAgICAgIHAucHJvcGVydGllcy5hZGRPYmplY3Qoe1xuICAgICAgICAgICAgICAgICAgbmFtZTogXCJjbGllbnRJcFwiLFxuICAgICAgICAgICAgICAgICAgbGFiZWw6IFwiQ2xpZW50IElQIENvbmZpZ1wiLFxuICAgICAgICAgICAgICAgICAgb3B0aW9ucyhwOiBQcm9wT2JqZWN0KSB7XG4gICAgICAgICAgICAgICAgICAgIHAucHJvcGVydGllcy5hZGROdW1iZXIoe1xuICAgICAgICAgICAgICAgICAgICAgIG5hbWU6IFwidGltZW91dFNlY29uZHNcIixcbiAgICAgICAgICAgICAgICAgICAgICBsYWJlbDogXCJUaW1lb3V0IFNlY29uZHNcIixcbiAgICAgICAgICAgICAgICAgICAgICBvcHRpb25zKHA6IFByb3BOdW1iZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHAubnVtYmVyS2luZCA9IFwidWludDMyXCI7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBEZWZhdWx0IGlzIDMgaG91cnNcbiAgICAgICAgICAgICAgICAgICAgICAgIHAuYmFzZURlZmF1bHRWYWx1ZSA9IFwiMTA4MDBcIjtcbiAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHAucHJvcGVydGllcy5hZGRUZXh0KHtcbiAgICAgICAgICAgICAgbmFtZTogXCJ0b3BvbG9neUtleXNcIixcbiAgICAgICAgICAgICAgbGFiZWw6IFwiVG9wb2xvZ3kgS2V5c1wiLFxuICAgICAgICAgICAgICBvcHRpb25zKHA6IFByb3BUZXh0KSB7XG4gICAgICAgICAgICAgICAgcC5yZXBlYXRlZCA9IHRydWU7XG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHAucHJvcGVydGllcy5hZGRFbnVtKHtcbiAgICAgICAgICAgICAgbmFtZTogXCJ0eXBlXCIsXG4gICAgICAgICAgICAgIGxhYmVsOiBcIlR5cGVcIixcbiAgICAgICAgICAgICAgb3B0aW9ucyhwOiBQcm9wRW51bSkge1xuICAgICAgICAgICAgICAgIHAudmFyaWFudHMgPSBbXG4gICAgICAgICAgICAgICAgICBcIkV4dGVybmFsTmFtZVwiLFxuICAgICAgICAgICAgICAgICAgXCJDbHVzdGVySVBcIixcbiAgICAgICAgICAgICAgICAgIFwiTm9kZVBvcnRcIixcbiAgICAgICAgICAgICAgICAgIFwiTG9hZEJhbGFuY2VyXCIsXG4gICAgICAgICAgICAgICAgXTtcbiAgICAgICAgICAgICAgICBwLmJhc2VEZWZhdWx0VmFsdWUgPSBcIkNsdXN0ZXJJUFwiO1xuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfSxcbiAgICAgICAgfSk7XG4gICAgICAgIHAucHJvcGVydGllcy5hZGRPYmplY3Qoe1xuICAgICAgICAgIG5hbWU6IFwic3RhdHVzXCIsXG4gICAgICAgICAgbGFiZWw6IFwiU2VydmljZSBTdGF0dXNcIixcbiAgICAgICAgICBvcHRpb25zKHA6IFByb3BPYmplY3QpIHtcbiAgICAgICAgICAgIHAucHJvcGVydGllcy5hZGRMaW5rKHtcbiAgICAgICAgICAgICAgbmFtZTogXCJsb2FkQmFsYW5jZXJcIixcbiAgICAgICAgICAgICAgbGFiZWw6IFwiTG9hZCBCYWxhbmNlciBTdGF0dXNcIixcbiAgICAgICAgICAgICAgb3B0aW9ucyhwOiBQcm9wTGluaykge1xuICAgICAgICAgICAgICAgIHAubG9va3VwID0ge1xuICAgICAgICAgICAgICAgICAgdHlwZU5hbWU6IFwia3ViZXJuZXRlc0xvYWRCYWxhbmNlclN0YXR1c1wiLFxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9LFxuICAgICAgICB9KTtcbiAgICAgIH0sXG4gICAgfSk7XG4gICAgYy5wcm9wZXJ0aWVzLmFkZENvZGUoe1xuICAgICAgbmFtZTogXCJrdWJlcm5ldGVzT2JqZWN0WWFtbFwiLFxuICAgICAgbGFiZWw6IFwiS3ViZXJuZXRlcyBPYmplY3QgWUFNTFwiLFxuICAgICAgb3B0aW9ucyhwOiBQcm9wQ29kZSkge1xuICAgICAgICBwLnJlbGF0aW9uc2hpcHMudXBkYXRlcyh7XG4gICAgICAgICAgcGFydG5lcjoge1xuICAgICAgICAgICAgdHlwZU5hbWU6IFwia3ViZXJuZXRlc1NlcnZpY2VFbnRpdHlcIixcbiAgICAgICAgICAgIG5hbWVzOiBbXCJwcm9wZXJ0aWVzXCIsIFwia3ViZXJuZXRlc09iamVjdFwiXSxcbiAgICAgICAgICB9LFxuICAgICAgICB9KTtcbiAgICAgICAgcC5yZWxhdGlvbnNoaXBzLmVpdGhlcih7XG4gICAgICAgICAgcGFydG5lcjoge1xuICAgICAgICAgICAgdHlwZU5hbWU6IFwia3ViZXJuZXRlc1NlcnZpY2VFbnRpdHlcIixcbiAgICAgICAgICAgIG5hbWVzOiBbXCJwcm9wZXJ0aWVzXCIsIFwia3ViZXJuZXRlc09iamVjdFwiXSxcbiAgICAgICAgICB9LFxuICAgICAgICB9KTtcbiAgICAgICAgcC5sYW5ndWFnZSA9IFwieWFtbFwiO1xuICAgICAgfSxcbiAgICB9KTtcbiAgfSxcbn0pO1xuXG5yZWdpc3RyeS5iYXNlKHtcbiAgdHlwZU5hbWU6IFwia3ViZXJuZXRlc1NlcnZpY2VQb3J0XCIsXG4gIGRpc3BsYXlUeXBlTmFtZTogXCJLdWJlcm5ldGVzIFNlcnZpY2UgUG9ydFwiLFxuICBzZXJ2aWNlTmFtZTogXCJrdWJlcm5ldGVzXCIsXG4gIG9wdGlvbnMoYykge1xuICAgIGMuZmllbGRzLmFkZFRleHQoe1xuICAgICAgbmFtZTogXCJhcHBQcm90b2NvbFwiLFxuICAgICAgbGFiZWw6IFwiQXBwIFByb3RvY29sXCIsXG4gICAgfSk7XG4gICAgYy5maWVsZHMuYWRkVGV4dCh7XG4gICAgICBuYW1lOiBcIm5hbWVcIixcbiAgICAgIGxhYmVsOiBcIk5hbWVcIixcbiAgICB9KTtcbiAgICBjLmZpZWxkcy5hZGROdW1iZXIoe1xuICAgICAgbmFtZTogXCJub2RlUG9ydFwiLFxuICAgICAgbGFiZWw6IFwiTm9kZSBQb3J0XCIsXG4gICAgICBvcHRpb25zKHA6IFByb3BOdW1iZXIpIHtcbiAgICAgICAgcC5udW1iZXJLaW5kID0gXCJ1aW50MzJcIjtcbiAgICAgIH0sXG4gICAgfSk7XG4gICAgYy5maWVsZHMuYWRkTnVtYmVyKHtcbiAgICAgIG5hbWU6IFwicG9ydFwiLFxuICAgICAgbGFiZWw6IFwiUG9ydFwiLFxuICAgICAgb3B0aW9ucyhwOiBQcm9wTnVtYmVyKSB7XG4gICAgICAgIHAubnVtYmVyS2luZCA9IFwidWludDMyXCI7XG4gICAgICB9LFxuICAgIH0pO1xuICAgIGMuZmllbGRzLmFkZEVudW0oe1xuICAgICAgbmFtZTogXCJwcm90b2NvbFwiLFxuICAgICAgbGFiZWw6IFwiUHJvdG9jb2xcIixcbiAgICAgIG9wdGlvbnMocDogUHJvcEVudW0pIHtcbiAgICAgICAgcC52YXJpYW50cyA9IFtcIlRDUFwiLCBcIlVEUFwiLCBcIlNDVFBcIl07XG4gICAgICAgIHAuYmFzZURlZmF1bHRWYWx1ZSA9IFwiVENQXCI7XG4gICAgICB9LFxuICAgIH0pO1xuICAgIC8vIE5PVEU6IFwiTnVtYmVyIG9yIG5hbWUgb2YgdGhlIHBvcnQuLi5cIiwgaW1wbHlpbmcgZWl0aGVyIGFuIGludGVnZXIgb3JcbiAgICAvLyBzdHJpbmcgbmFtZS4gdWdoLlxuICAgIGMuZmllbGRzLmFkZFRleHQoe1xuICAgICAgbmFtZTogXCJ0YXJnZXRQb3J0XCIsXG4gICAgICBsYWJlbDogXCJUYXJnZXQgUG9ydFwiLFxuICAgIH0pO1xuICB9LFxufSk7XG4iXX0=
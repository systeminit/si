"use strict";

var _registry = require("../../registry");

_registry.registry.system({
  typeName: "billingAccount",
  displayTypeName: "System Initiative Billing Account",
  siPathName: "si-account",
  serviceName: "account",
  options: function options(c) {
    c.associations.hasMany({
      fieldName: "users",
      typeName: "user"
    });
    c.associations.hasMany({
      fieldName: "organizations",
      typeName: "organization"
    });
    c.associations.hasMany({
      fieldName: "integrationInstances",
      typeName: "integrationInstance"
    });
    c.addListMethod();
    c.addGetMethod();
    c.methods.addMethod({
      name: "signup",
      label: "Create a Billing Account and Administrative User",
      options: function options(p) {
        p.mutation = true;
        p.skipAuth = true;
        p.request.properties.addObject({
          name: "billingAccount",
          label: "Billing Account Information",
          options: function options(p) {
            p.required = true;
            p.properties.addText({
              name: "name",
              label: "Billing Account Name",
              options: function options(p) {
                p.required = true;
              }
            });
            p.properties.addText({
              name: "displayName",
              label: "Billing Account Display Name",
              options: function options(p) {
                p.required = true;
              }
            });
          }
        });
        p.request.properties.addObject({
          name: "user",
          label: "User Information",
          options: function options(p) {
            p.required = true;
            p.properties.addText({
              name: "name",
              label: "User Name",
              options: function options(p) {
                p.required = true;
              }
            });
            p.properties.addText({
              name: "displayName",
              label: "User Display Name",
              options: function options(p) {
                p.required = true;
              }
            });
            p.properties.addText({
              name: "email",
              label: "A valid email address",
              options: function options(p) {
                p.universal = true;
                p.required = true;
              }
            });
            p.properties.addPassword({
              name: "password",
              label: "The users password hash",
              options: function options(p) {
                p.universal = true;
                p.required = true;
                p.hidden = true;
              }
            });
          }
        });
        p.reply.properties.addLink({
          name: "billingAccount",
          label: "Billing Account Object",
          options: function options(p) {
            p.lookup = {
              typeName: "billingAccount"
            };
          }
        });
        p.reply.properties.addLink({
          name: "user",
          label: "User Object",
          options: function options(p) {
            p.lookup = {
              typeName: "user"
            };
          }
        });
      }
    });
    c.methods.addMethod({
      name: "create",
      label: "Create a Billing Account",
      options: function options(p) {
        p.mutation = true;
        p.isPrivate = true;
        p.request.properties.addText({
          name: "name",
          label: "Billing Account Name",
          options: function options(p) {
            p.required = true;
          }
        });
        p.request.properties.addText({
          name: "displayName",
          label: "Billing Account Display Name",
          options: function options(p) {
            p.required = true;
          }
        });
        p.reply.properties.addLink({
          name: "item",
          label: "Billing Account Item",
          options: function options(p) {
            p.lookup = {
              typeName: "billingAccount"
            };
          }
        });
      }
    });
  }
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy9jb21wb25lbnRzL3NpLWFjY291bnQvYmlsbGluZ0FjY291bnQudHMiXSwibmFtZXMiOlsicmVnaXN0cnkiLCJzeXN0ZW0iLCJ0eXBlTmFtZSIsImRpc3BsYXlUeXBlTmFtZSIsInNpUGF0aE5hbWUiLCJzZXJ2aWNlTmFtZSIsIm9wdGlvbnMiLCJjIiwiYXNzb2NpYXRpb25zIiwiaGFzTWFueSIsImZpZWxkTmFtZSIsImFkZExpc3RNZXRob2QiLCJhZGRHZXRNZXRob2QiLCJtZXRob2RzIiwiYWRkTWV0aG9kIiwibmFtZSIsImxhYmVsIiwicCIsIm11dGF0aW9uIiwic2tpcEF1dGgiLCJyZXF1ZXN0IiwicHJvcGVydGllcyIsImFkZE9iamVjdCIsInJlcXVpcmVkIiwiYWRkVGV4dCIsInVuaXZlcnNhbCIsImFkZFBhc3N3b3JkIiwiaGlkZGVuIiwicmVwbHkiLCJhZGRMaW5rIiwibG9va3VwIiwiaXNQcml2YXRlIl0sIm1hcHBpbmdzIjoiOztBQUNBOztBQUdBQSxtQkFBU0MsTUFBVCxDQUFnQjtBQUNkQyxFQUFBQSxRQUFRLEVBQUUsZ0JBREk7QUFFZEMsRUFBQUEsZUFBZSxFQUFFLG1DQUZIO0FBR2RDLEVBQUFBLFVBQVUsRUFBRSxZQUhFO0FBSWRDLEVBQUFBLFdBQVcsRUFBRSxTQUpDO0FBS2RDLEVBQUFBLE9BTGMsbUJBS05DLENBTE0sRUFLVztBQUN2QkEsSUFBQUEsQ0FBQyxDQUFDQyxZQUFGLENBQWVDLE9BQWYsQ0FBdUI7QUFDckJDLE1BQUFBLFNBQVMsRUFBRSxPQURVO0FBRXJCUixNQUFBQSxRQUFRLEVBQUU7QUFGVyxLQUF2QjtBQUlBSyxJQUFBQSxDQUFDLENBQUNDLFlBQUYsQ0FBZUMsT0FBZixDQUF1QjtBQUNyQkMsTUFBQUEsU0FBUyxFQUFFLGVBRFU7QUFFckJSLE1BQUFBLFFBQVEsRUFBRTtBQUZXLEtBQXZCO0FBSUFLLElBQUFBLENBQUMsQ0FBQ0MsWUFBRixDQUFlQyxPQUFmLENBQXVCO0FBQ3JCQyxNQUFB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RCxRQUFBQSxDQUFDLENBQUNjLFNBQUYsR0FBYyxJQUFkO0FBQ0FkLFFBQUFBLENBQUMsQ0FBQ0csT0FBRixDQUFVQyxVQUFWLENBQXFCRyxPQUFyQixDQUE2QjtBQUMzQlQsVUFBQUEsSUFBSSxFQUFFLE1BRHFCO0FBRTNCQyxVQUFBQSxLQUFLLEVBQUUsc0JBRm9CO0FBRzNCVixVQUFBQSxPQUgyQixtQkFHbkJXLENBSG1CLEVBR2hCO0FBQ1RBLFlBQUFBLENBQUMsQ0FBQ00sUUFBRixHQUFhLElBQWI7QUFDRDtBQUwwQixTQUE3QjtBQU9BTixRQUFBQSxDQUFDLENBQUNHLE9BQUYsQ0FBVUMsVUFBVixDQUFxQkcsT0FBckIsQ0FBNkI7QUFDM0JULFVBQUFBLElBQUksRUFBRSxhQURxQjtBQUUzQkMsVUFBQUEsS0FBSyxFQUFFLDhCQUZvQjtBQUczQlYsVUFBQUEsT0FIMkIsbUJBR25CVyxDQUhtQixFQUdoQjtBQUNUQSxZQUFBQSxDQUFDLENBQUNNLFFBQUYsR0FBYSxJQUFiO0FBQ0Q7QUFMMEIsU0FBN0I7QUFPQU4sUUFBQUEsQ0FBQyxDQUFDVyxLQUFGLENBQVFQLFVBQVIsQ0FBbUJRLE9BQW5CLENBQTJCO0FBQ3pCZCxVQUFBQSxJQUFJLEVBQUUsTUFEbUI7QUFFekJDLFVBQUFBLEtBQUssd0JBRm9CO0FBR3pCVixVQUFBQSxPQUh5QixtQkFHakJXLENBSGlCLEVBR0o7QUFDbkJBLFlBQUFBLENBQUMsQ0FBQ2EsTUFBRixHQUFXO0FBQ1Q1QixjQUFBQSxRQUFRLEVBQUU7QUFERCxhQUFYO0FBR0Q7QUFQd0IsU0FBM0I7QUFTRDtBQTdCaUIsS0FBcEI7QUErQkQ7QUEzSWEsQ0FBaEIiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBQcm9wT2JqZWN0LCBQcm9wTWV0aG9kLCBQcm9wTGluayB9IGZyb20gXCIuLi8uLi9jb21wb25lbnRzL3ByZWx1ZGVcIjtcbmltcG9ydCB7IHJlZ2lzdHJ5IH0gZnJvbSBcIi4uLy4uL3JlZ2lzdHJ5XCI7XG5pbXBvcnQgeyBTeXN0ZW1PYmplY3QgfSBmcm9tIFwiLi4vLi4vc3lzdGVtQ29tcG9uZW50XCI7XG5cbnJlZ2lzdHJ5LnN5c3RlbSh7XG4gIHR5cGVOYW1lOiBcImJpbGxpbmdBY2NvdW50XCIsXG4gIGRpc3BsYXlUeXBlTmFtZTogXCJTeXN0ZW0gSW5pdGlhdGl2ZSBCaWxsaW5nIEFjY291bnRcIixcbiAgc2lQYXRoTmFtZTogXCJzaS1hY2NvdW50XCIsXG4gIHNlcnZpY2VOYW1lOiBcImFjY291bnRcIixcbiAgb3B0aW9ucyhjOiBTeXN0ZW1PYmplY3QpIHtcbiAgICBjLmFzc29jaWF0aW9ucy5oYXNNYW55KHtcbiAgICAgIGZpZWxkTmFtZTogXCJ1c2Vyc1wiLFxuICAgICAgdHlwZU5hbWU6IFwidXNlclwiLFxuICAgIH0pO1xuICAgIGMuYXNzb2NpYXRpb25zLmhhc01hbnkoe1xuICAgICAgZmllbGROYW1lOiBcIm9yZ2FuaXphdGlvbnNcIixcbiAgICAgIHR5cGVOYW1lOiBcIm9yZ2FuaXphdGlvblwiLFxuICAgIH0pO1xuICAgIGMuYXNzb2NpYXRpb25zLmhhc01hbnkoe1xuICAgICAgZmllbGROYW1lOiBcImludGVncmF0aW9uSW5zdGFuY2VzXCIsXG4gICAgICB0eXBlTmFtZTogXCJpbnRlZ3JhdGlvbkluc3RhbmNlXCIsXG4gICAgfSk7XG5cbiAgICBjLmFkZExpc3RNZXRob2QoKTtcbiAgICBjLmFkZEdldE1ldGhvZCgpO1xuXG4gICAgYy5tZXRob2RzLmFkZE1ldGhvZCh7XG4gICAgICBuYW1lOiBcInNpZ251cFwiLFxuICAgICAgbGFiZWw6IFwiQ3JlYXRlIGEgQmlsbGluZyBBY2NvdW50IGFuZCBBZG1pbmlzdHJhdGl2ZSBVc2VyXCIsXG4gICAgICBvcHRpb25zKHA6IFByb3BNZXRob2QpIHtcbiAgICAgICAgcC5tdXRhdGlvbiA9IHRydWU7XG4gICAgICAgIHAuc2tpcEF1dGggPSB0cnVlO1xuICAgICAgICBwLnJlcXVlc3QucHJvcGVydGllcy5hZGRPYmplY3Qoe1xuICAgICAgICAgIG5hbWU6IFwiYmlsbGluZ0FjY291bnRcIixcbiAgICAgICAgICBsYWJlbDogXCJCaWxsaW5nIEFjY291bnQgSW5mb3JtYXRpb25cIixcbiAgICAgICAgICBvcHRpb25zKHA6IFByb3BPYmplY3QpIHtcbiAgICAgICAgICAgIHAucmVxdWlyZWQgPSB0cnVlO1xuICAgICAgICAgICAgcC5wcm9wZXJ0aWVzLmFkZFRleHQoe1xuICAgICAgICAgICAgICBuYW1lOiBcIm5hbWVcIixcbiAgICAgICAgICAgICAgbGFiZWw6IFwiQmlsbGluZyBBY2NvdW50IE5hbWVcIixcbiAgICAgICAgICAgICAgb3B0aW9ucyhwKSB7XG4gICAgICAgICAgICAgICAgcC5yZXF1aXJlZCA9IHRydWU7XG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHAucHJvcGVydGllcy5hZGRUZXh0KHtcbiAgICAgICAgICAgICAgbmFtZTogXCJkaXNwbGF5TmFtZVwiLFxuICAgICAgICAgICAgICBsYWJlbDogXCJCaWxsaW5nIEFjY291bnQgRGlzcGxheSBOYW1lXCIsXG4gICAgICAgICAgICAgIG9wdGlvbnMocCkge1xuICAgICAgICAgICAgICAgIHAucmVxdWlyZWQgPSB0cnVlO1xuICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfSxcbiAgICAgICAgfSk7XG4gICAgICAgIHAucmVxdWVzdC5wcm9wZXJ0aWVzLmFkZE9iamVjdCh7XG4gICAgICAgICAgbmFtZTogXCJ1c2VyXCIsXG4gICAgICAgICAgbGFiZWw6IFwiVXNlciBJbmZvcm1hdGlvblwiLFxuICAgICAgICAgIG9wdGlvbnMocDogUHJvcE9iamVjdCkge1xuICAgICAgICAgICAgcC5yZXF1aXJlZCA9IHRydWU7XG4gICAgICAgICAgICBwLnByb3BlcnRpZXMuYWRkVGV4dCh7XG4gICAgICAgICAgICAgIG5hbWU6IFwibmFtZVwiLFxuICAgICAgICAgICAgICBsYWJlbDogXCJVc2VyIE5hbWVcIixcbiAgICAgICAgICAgICAgb3B0aW9ucyhwKSB7XG4gICAgICAgICAgICAgICAgcC5yZXF1aXJlZCA9IHRydWU7XG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHAucHJvcGVydGllcy5hZGRUZXh0KHtcbiAgICAgICAgICAgICAgbmFtZTogXCJkaXNwbGF5TmFtZVwiLFxuICAgICAgICAgICAgICBsYWJlbDogXCJVc2VyIERpc3BsYXkgTmFtZVwiLFxuICAgICAgICAgICAgICBvcHRpb25zKHApIHtcbiAgICAgICAgICAgICAgICBwLnJlcXVpcmVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcC5wcm9wZXJ0aWVzLmFkZFRleHQoe1xuICAgICAgICAgICAgICBuYW1lOiBcImVtYWlsXCIsXG4gICAgICAgICAgICAgIGxhYmVsOiBcIkEgdmFsaWQgZW1haWwgYWRkcmVzc1wiLFxuICAgICAgICAgICAgICBvcHRpb25zKHApIHtcbiAgICAgICAgICAgICAgICBwLnVuaXZlcnNhbCA9IHRydWU7XG4gICAgICAgICAgICAgICAgcC5yZXF1aXJlZCA9IHRydWU7XG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIHAucHJvcGVydGllcy5hZGRQYXNzd29yZCh7XG4gICAgICAgICAgICAgIG5hbWU6IFwicGFzc3dvcmRcIixcbiAgICAgICAgICAgICAgbGFiZWw6IFwiVGhlIHVzZXJzIHBhc3N3b3JkIGhhc2hcIixcbiAgICAgICAgICAgICAgb3B0aW9ucyhwKSB7XG4gICAgICAgICAgICAgICAgcC51bml2ZXJzYWwgPSB0cnVlO1xuICAgICAgICAgICAgICAgIHAucmVxdWlyZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgIHAuaGlkZGVuID0gdHJ1ZTtcbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH0sXG4gICAgICAgIH0pO1xuICAgICAgICBwLnJlcGx5LnByb3BlcnRpZXMuYWRkTGluayh7XG4gICAgICAgICAgbmFtZTogXCJiaWxsaW5nQWNjb3VudFwiLFxuICAgICAgICAgIGxhYmVsOiBgQmlsbGluZyBBY2NvdW50IE9iamVjdGAsXG4gICAgICAgICAgb3B0aW9ucyhwOiBQcm9wTGluaykge1xuICAgICAgICAgICAgcC5sb29rdXAgPSB7XG4gICAgICAgICAgICAgIHR5cGVOYW1lOiBcImJpbGxpbmdBY2NvdW50XCIsXG4gICAgICAgICAgICB9O1xuICAgICAgICAgIH0sXG4gICAgICAgIH0pO1xuICAgICAgICBwLnJlcGx5LnByb3BlcnRpZXMuYWRkTGluayh7XG4gICAgICAgICAgbmFtZTogXCJ1c2VyXCIsXG4gICAgICAgICAgbGFiZWw6IGBVc2VyIE9iamVjdGAsXG4gICAgICAgICAgb3B0aW9ucyhwOiBQcm9wTGluaykge1xuICAgICAgICAgICAgcC5sb29rdXAgPSB7XG4gICAgICAgICAgICAgIHR5cGVOYW1lOiBcInVzZXJcIixcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgfSxcbiAgICAgICAgfSk7XG4gICAgICB9LFxuICAgIH0pO1xuXG4gICAgYy5tZXRob2RzLmFkZE1ldGhvZCh7XG4gICAgICBuYW1lOiBcImNyZWF0ZVwiLFxuICAgICAgbGFiZWw6IFwiQ3JlYXRlIGEgQmlsbGluZyBBY2NvdW50XCIsXG4gICAgICBvcHRpb25zKHA6IFByb3BNZXRob2QpIHtcbiAgICAgICAgcC5tdXRhdGlvbiA9IHRydWU7XG4gICAgICAgIHAuaXNQcml2YXRlID0gdHJ1ZTtcbiAgICAgICAgcC5yZXF1ZXN0LnByb3BlcnRpZXMuYWRkVGV4dCh7XG4gICAgICAgICAgbmFtZTogXCJuYW1lXCIsXG4gICAgICAgICAgbGFiZWw6IFwiQmlsbGluZyBBY2NvdW50IE5hbWVcIixcbiAgICAgICAgICBvcHRpb25zKHApIHtcbiAgICAgICAgICAgIHAucmVxdWlyZWQgPSB0cnVlO1xuICAgICAgICAgIH0sXG4gICAgICAgIH0pO1xuICAgICAgICBwLnJlcXVlc3QucHJvcGVydGllcy5hZGRUZXh0KHtcbiAgICAgICAgICBuYW1lOiBcImRpc3BsYXlOYW1lXCIsXG4gICAgICAgICAgbGFiZWw6IFwiQmlsbGluZyBBY2NvdW50IERpc3BsYXkgTmFtZVwiLFxuICAgICAgICAgIG9wdGlvbnMocCkge1xuICAgICAgICAgICAgcC5yZXF1aXJlZCA9IHRydWU7XG4gICAgICAgICAgfSxcbiAgICAgICAgfSk7XG4gICAgICAgIHAucmVwbHkucHJvcGVydGllcy5hZGRMaW5rKHtcbiAgICAgICAgICBuYW1lOiBcIml0ZW1cIixcbiAgICAgICAgICBsYWJlbDogYEJpbGxpbmcgQWNjb3VudCBJdGVtYCxcbiAgICAgICAgICBvcHRpb25zKHA6IFByb3BMaW5rKSB7XG4gICAgICAgICAgICBwLmxvb2t1cCA9IHtcbiAgICAgICAgICAgICAgdHlwZU5hbWU6IFwiYmlsbGluZ0FjY291bnRcIixcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgfSxcbiAgICAgICAgfSk7XG4gICAgICB9LFxuICAgIH0pO1xuICB9LFxufSk7XG4iXX0=
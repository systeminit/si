"use strict";

var _registry = require("../../registry");

_registry.registry.system({
  typeName: "integration",
  displayTypeName: "An integration with another system",
  siPathName: "si-account",
  serviceName: "account",
  options: function options(c) {
    c.associations.belongsTo({
      fromFieldPath: ["siProperties", "billingAccountId"],
      typeName: "billingAccount"
    });
    c.associations.hasMany({
      fieldName: "integrationInstances",
      typeName: "integrationInstance"
    });
    c.fields.addNumber({
      name: "version",
      label: "The version of this integration",
      options: function options(p) {
        p.required = true;
        p.hidden = true;
        p.numberKind = "int32";
      }
    });
    c.fields.addObject({
      name: "options",
      label: "Options for this Integration",
      options: function options(p) {
        p.repeated = true;
        p.properties.addText({
          name: "name",
          label: "The name for this option",
          options: function options(p) {
            p.required = true;
          }
        });
        p.properties.addText({
          name: "displayName",
          label: "The display name for this option",
          options: function options(p) {
            p.required = true;
          }
        });
        p.properties.addEnum({
          name: "optionType",
          label: "The type of option",
          options: function options(p) {
            p.required = true;
            p.variants = ["string", "secret"];
          }
        });
      }
    });
    c.addListMethod();
    c.addGetMethod();
    c.methods.addMethod({
      name: "create",
      label: "Create an Integration",
      options: function options(p) {
        p.mutation = true;
        p.hidden = true;
        p.isPrivate = true;
        p.request.properties.addText({
          name: "name",
          label: "Integration Name",
          options: function options(p) {
            p.required = true;
          }
        });
        p.request.properties.addText({
          name: "displayName",
          label: "Integration Display Name",
          options: function options(p) {
            p.required = true;
          }
        });
        p.request.properties.addNumber({
          name: "version",
          label: "Version of this object; for migration",
          options: function options(p) {
            p.required = true;
            p.numberKind = "int32";
          }
        });
        p.request.properties.addLink({
          name: "options",
          label: "Options for this Integration",
          options: function options(p) {
            p.repeated = true;
            p.lookup = {
              typeName: "integration",
              names: ["options"]
            };
          }
        });
        p.reply.properties.addLink({
          name: "object",
          label: "".concat(c.displayTypeName, " Object"),
          options: function options(p) {
            p.lookup = {
              typeName: "integration"
            };
          }
        });
      }
    });
  }
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy9jb21wb25lbnRzL3NpLWFjY291bnQvaW50ZWdyYXRpb24udHMiXSwibmFtZXMiOlsicmVnaXN0cnkiLCJzeXN0ZW0iLCJ0eXBlTmFtZSIsImRpc3BsYXlUeXBlTmFtZSIsInNpUGF0aE5hbWUiLCJzZXJ2aWNlTmFtZSIsIm9wdGlvbnMiLCJjIiwiYXNzb2NpYXRpb25zIiwiYmVsb25nc1RvIiwiZnJvbUZpZWxkUGF0aCIsImhhc01hbnkiLCJmaWVsZE5hbWUiLCJmaWVsZHMiLCJhZGROdW1iZXIiLCJuYW1lIiwibGFiZWwiLCJwIiwicmVxdWlyZWQiLCJoaWRkZW4iLCJudW1iZXJLaW5kIiwiYWRkT2JqZWN0IiwicmVwZWF0ZWQiLCJwcm9wZXJ0aWVzIiwiYWRkVGV4dCIsImFkZEVudW0iLCJ2YXJpYW50cyIsImFkZExpc3RNZXRob2QiLCJhZGRHZXRNZXRob2QiLCJtZXRob2RzIiwiYWRkTWV0aG9kIiwibXV0YXRpb24iLCJpc1ByaXZhdGUiLCJyZXF1ZXN0IiwiYWRkTGluayIsImxvb2t1cCIsIm5hbWVzIiwicmVwbHkiXSwibWFwcGluZ3MiOiI7O0FBUUE7O0FBR0FBLG1CQUFTQyxNQUFULENBQWdCO0FBQ2RDLEVBQUFBLFFBQVEsRUFBRSxhQURJO0FBRWRDLEVBQUFBLGVBQWUsRUFBRSxvQ0FGSDtBQUdkQyxFQUFBQSxVQUFVLEVBQUUsWUFIRTtBQUlkQyxFQUFBQSxXQUFXLEVBQUUsU0FKQztBQUtkQyxFQUFBQSxPQUxjLG1CQUtOQyxDQUxNLEVBS1c7QUFDdkJBLElBQUFBLENBQUMsQ0FBQ0MsWUFBRixDQUFlQyxTQUFmLENBQXlCO0FBQ3ZCQyxNQUFBQSxhQUFhLEVBQUUsQ0FBQyxjQUFELEVBQWlCLGtCQUFqQixDQURRO0FBRXZCUixNQUFBQSxRQUFRLEVBQUU7QUFGYSxLQUF6QjtBQUlBSyxJQUFBQSxDQUFDLENBQUNDLFlBQUYsQ0FBZUcsT0FBZixDQUF1QjtBQUNyQkMsTUFBQUEsU0FBUyxFQUFFLHNCQURVO0FBRXJC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O0FBU0Q7QUFqRGlCLEtBQXBCO0FBbUREO0FBekdhLENBQWhCIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtcbiAgUHJvcE9iamVjdCxcbiAgUHJvcE51bWJlcixcbiAgUHJvcE1ldGhvZCxcbiAgUHJvcExpbmssXG4gIFByb3BUZXh0LFxuICBQcm9wRW51bSxcbn0gZnJvbSBcIi4uLy4uL2NvbXBvbmVudHMvcHJlbHVkZVwiO1xuaW1wb3J0IHsgcmVnaXN0cnkgfSBmcm9tIFwiLi4vLi4vcmVnaXN0cnlcIjtcbmltcG9ydCB7IFN5c3RlbU9iamVjdCB9IGZyb20gXCIuLi8uLi9zeXN0ZW1Db21wb25lbnRcIjtcblxucmVnaXN0cnkuc3lzdGVtKHtcbiAgdHlwZU5hbWU6IFwiaW50ZWdyYXRpb25cIixcbiAgZGlzcGxheVR5cGVOYW1lOiBcIkFuIGludGVncmF0aW9uIHdpdGggYW5vdGhlciBzeXN0ZW1cIixcbiAgc2lQYXRoTmFtZTogXCJzaS1hY2NvdW50XCIsXG4gIHNlcnZpY2VOYW1lOiBcImFjY291bnRcIixcbiAgb3B0aW9ucyhjOiBTeXN0ZW1PYmplY3QpIHtcbiAgICBjLmFzc29jaWF0aW9ucy5iZWxvbmdzVG8oe1xuICAgICAgZnJvbUZpZWxkUGF0aDogW1wic2lQcm9wZXJ0aWVzXCIsIFwiYmlsbGluZ0FjY291bnRJZFwiXSxcbiAgICAgIHR5cGVOYW1lOiBcImJpbGxpbmdBY2NvdW50XCIsXG4gICAgfSk7XG4gICAgYy5hc3NvY2lhdGlvbnMuaGFzTWFueSh7XG4gICAgICBmaWVsZE5hbWU6IFwiaW50ZWdyYXRpb25JbnN0YW5jZXNcIixcbiAgICAgIHR5cGVOYW1lOiBcImludGVncmF0aW9uSW5zdGFuY2VcIixcbiAgICB9KTtcbiAgICBjLmZpZWxkcy5hZGROdW1iZXIoe1xuICAgICAgbmFtZTogXCJ2ZXJzaW9uXCIsXG4gICAgICBsYWJlbDogXCJUaGUgdmVyc2lvbiBvZiB0aGlzIGludGVncmF0aW9uXCIsXG4gICAgICBvcHRpb25zKHA6IFByb3BOdW1iZXIpIHtcbiAgICAgICAgcC5yZXF1aXJlZCA9IHRydWU7XG4gICAgICAgIHAuaGlkZGVuID0gdHJ1ZTtcbiAgICAgICAgcC5udW1iZXJLaW5kID0gXCJpbnQzMlwiO1xuICAgICAgfSxcbiAgICB9KTtcbiAgICBjLmZpZWxkcy5hZGRPYmplY3Qoe1xuICAgICAgbmFtZTogXCJvcHRpb25zXCIsXG4gICAgICBsYWJlbDogXCJPcHRpb25zIGZvciB0aGlzIEludGVncmF0aW9uXCIsXG4gICAgICBvcHRpb25zKHA6IFByb3BPYmplY3QpIHtcbiAgICAgICAgcC5yZXBlYXRlZCA9IHRydWU7XG4gICAgICAgIHAucHJvcGVydGllcy5hZGRUZXh0KHtcbiAgICAgICAgICBuYW1lOiBcIm5hbWVcIixcbiAgICAgICAgICBsYWJlbDogXCJUaGUgbmFtZSBmb3IgdGhpcyBvcHRpb25cIixcbiAgICAgICAgICBvcHRpb25zKHA6IFByb3BUZXh0KSB7XG4gICAgICAgICAgICBwLnJlcXVpcmVkID0gdHJ1ZTtcbiAgICAgICAgICB9LFxuICAgICAgICB9KTtcbiAgICAgICAgcC5wcm9wZXJ0aWVzLmFkZFRleHQoe1xuICAgICAgICAgIG5hbWU6IFwiZGlzcGxheU5hbWVcIixcbiAgICAgICAgICBsYWJlbDogXCJUaGUgZGlzcGxheSBuYW1lIGZvciB0aGlzIG9wdGlvblwiLFxuICAgICAgICAgIG9wdGlvbnMocDogUHJvcFRleHQpIHtcbiAgICAgICAgICAgIHAucmVxdWlyZWQgPSB0cnVlO1xuICAgICAgICAgIH0sXG4gICAgICAgIH0pO1xuICAgICAgICBwLnByb3BlcnRpZXMuYWRkRW51bSh7XG4gICAgICAgICAgbmFtZTogXCJvcHRpb25UeXBlXCIsXG4gICAgICAgICAgbGFiZWw6IFwiVGhlIHR5cGUgb2Ygb3B0aW9uXCIsXG4gICAgICAgICAgb3B0aW9ucyhwOiBQcm9wRW51bSkge1xuICAgICAgICAgICAgcC5yZXF1aXJlZCA9IHRydWU7XG4gICAgICAgICAgICBwLnZhcmlhbnRzID0gW1wic3RyaW5nXCIsIFwic2VjcmV0XCJdO1xuICAgICAgICAgIH0sXG4gICAgICAgIH0pO1xuICAgICAgfSxcbiAgICB9KTtcbiAgICBjLmFkZExpc3RNZXRob2QoKTtcbiAgICBjLmFkZEdldE1ldGhvZCgpO1xuICAgIGMubWV0aG9kcy5hZGRNZXRob2Qoe1xuICAgICAgbmFtZTogXCJjcmVhdGVcIixcbiAgICAgIGxhYmVsOiBcIkNyZWF0ZSBhbiBJbnRlZ3JhdGlvblwiLFxuICAgICAgb3B0aW9ucyhwOiBQcm9wTWV0aG9kKSB7XG4gICAgICAgIHAubXV0YXRpb24gPSB0cnVlO1xuICAgICAgICBwLmhpZGRlbiA9IHRydWU7XG4gICAgICAgIHAuaXNQcml2YXRlID0gdHJ1ZTtcbiAgICAgICAgcC5yZXF1ZXN0LnByb3BlcnRpZXMuYWRkVGV4dCh7XG4gICAgICAgICAgbmFtZTogXCJuYW1lXCIsXG4gICAgICAgICAgbGFiZWw6IFwiSW50ZWdyYXRpb24gTmFtZVwiLFxuICAgICAgICAgIG9wdGlvbnMocCkge1xuICAgICAgICAgICAgcC5yZXF1aXJlZCA9IHRydWU7XG4gICAgICAgICAgfSxcbiAgICAgICAgfSk7XG4gICAgICAgIHAucmVxdWVzdC5wcm9wZXJ0aWVzLmFkZFRleHQoe1xuICAgICAgICAgIG5hbWU6IFwiZGlzcGxheU5hbWVcIixcbiAgICAgICAgICBsYWJlbDogXCJJbnRlZ3JhdGlvbiBEaXNwbGF5IE5hbWVcIixcbiAgICAgICAgICBvcHRpb25zKHApIHtcbiAgICAgICAgICAgIHAucmVxdWlyZWQgPSB0cnVlO1xuICAgICAgICAgIH0sXG4gICAgICAgIH0pO1xuICAgICAgICBwLnJlcXVlc3QucHJvcGVydGllcy5hZGROdW1iZXIoe1xuICAgICAgICAgIG5hbWU6IFwidmVyc2lvblwiLFxuICAgICAgICAgIGxhYmVsOiBcIlZlcnNpb24gb2YgdGhpcyBvYmplY3Q7IGZvciBtaWdyYXRpb25cIixcbiAgICAgICAgICBvcHRpb25zKHA6IFByb3BOdW1iZXIpIHtcbiAgICAgICAgICAgIHAucmVxdWlyZWQgPSB0cnVlO1xuICAgICAgICAgICAgcC5udW1iZXJLaW5kID0gXCJpbnQzMlwiO1xuICAgICAgICAgIH0sXG4gICAgICAgIH0pO1xuICAgICAgICBwLnJlcXVlc3QucHJvcGVydGllcy5hZGRMaW5rKHtcbiAgICAgICAgICBuYW1lOiBcIm9wdGlvbnNcIixcbiAgICAgICAgICBsYWJlbDogXCJPcHRpb25zIGZvciB0aGlzIEludGVncmF0aW9uXCIsXG4gICAgICAgICAgb3B0aW9ucyhwOiBQcm9wTGluaykge1xuICAgICAgICAgICAgcC5yZXBlYXRlZCA9IHRydWU7XG4gICAgICAgICAgICBwLmxvb2t1cCA9IHtcbiAgICAgICAgICAgICAgdHlwZU5hbWU6IFwiaW50ZWdyYXRpb25cIixcbiAgICAgICAgICAgICAgbmFtZXM6IFtcIm9wdGlvbnNcIl0sXG4gICAgICAgICAgICB9O1xuICAgICAgICAgIH0sXG4gICAgICAgIH0pO1xuICAgICAgICBwLnJlcGx5LnByb3BlcnRpZXMuYWRkTGluayh7XG4gICAgICAgICAgbmFtZTogXCJvYmplY3RcIixcbiAgICAgICAgICBsYWJlbDogYCR7Yy5kaXNwbGF5VHlwZU5hbWV9IE9iamVjdGAsXG4gICAgICAgICAgb3B0aW9ucyhwOiBQcm9wTGluaykge1xuICAgICAgICAgICAgcC5sb29rdXAgPSB7XG4gICAgICAgICAgICAgIHR5cGVOYW1lOiBcImludGVncmF0aW9uXCIsXG4gICAgICAgICAgICB9O1xuICAgICAgICAgIH0sXG4gICAgICAgIH0pO1xuICAgICAgfSxcbiAgICB9KTtcbiAgfSxcbn0pO1xuXG4iXX0=
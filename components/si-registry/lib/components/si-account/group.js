"use strict";

var _registry = require("../../registry");

_registry.registry.system({
  typeName: "group",
  displayTypeName: "A System Initiative User Group",
  siPathName: "si-account",
  serviceName: "account",
  options: function options(c) {
    // The magical add list association lives here! Yay! Progress
    c.fields.addText({
      name: "userIds",
      label: "User IDs of our groups members",
      options: function options(p) {
        p.repeated = true;
        p.required = true;
      }
    });
    c.fields.addObject({
      name: "siProperties",
      label: "SI Internal Properties",
      options: function options(p) {
        p.required = true;
        p.properties.addText({
          name: "billingAccountId",
          label: "Billing Account ID",
          options: function options(p) {
            p.required = true;
          }
        });
      }
    });
    c.fields.addLink({
      name: "capabilities",
      label: "Authorized capabilities for this user",
      options: function options(p) {
        p.hidden = true;
        p.repeated = true;
        p.lookup = {
          typeName: "capability"
        };
      }
    });
    c.addListMethod();
    c.addGetMethod();
    c.methods.addMethod({
      name: "create",
      label: "Create a Group",
      options: function options(p) {
        p.mutation = true;
        p.request.properties.addText({
          name: "name",
          label: "Group Name",
          options: function options(p) {
            p.required = true;
          }
        });
        p.request.properties.addText({
          name: "displayName",
          label: "Group Display Name",
          options: function options(p) {
            p.required = true;
          }
        });
        p.request.properties.addText({
          name: "userIds",
          label: "Group user IDs",
          options: function options(p) {
            p.repeated = true;
          }
        });
        p.request.properties.addLink({
          name: "siProperties",
          label: "The SI Properties for this User",
          options: function options(p) {
            p.required = true;
            p.lookup = {
              typeName: "group",
              names: ["siProperties"]
            };
          }
        });
        p.request.properties.addLink({
          name: "capabilities",
          label: "Authorized capabilities for this user",
          options: function options(p) {
            p.hidden = true;
            p.repeated = true;
            p.lookup = {
              typeName: "capability"
            };
          }
        });
        p.reply.properties.addLink({
          name: "item",
          label: "".concat(c.displayTypeName, " Item"),
          options: function options(p) {
            p.lookup = {
              typeName: "group"
            };
          }
        });
      }
    });
  }
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy9jb21wb25lbnRzL3NpLWFjY291bnQvZ3JvdXAudHMiXSwibmFtZXMiOlsicmVnaXN0cnkiLCJzeXN0ZW0iLCJ0eXBlTmFtZSIsImRpc3BsYXlUeXBlTmFtZSIsInNpUGF0aE5hbWUiLCJzZXJ2aWNlTmFtZSIsIm9wdGlvbnMiLCJjIiwiZmllbGRzIiwiYWRkVGV4dCIsIm5hbWUiLCJsYWJlbCIsInAiLCJyZXBlYXRlZCIsInJlcXVpcmVkIiwiYWRkT2JqZWN0IiwicHJvcGVydGllcyIsImFkZExpbmsiLCJoaWRkZW4iLCJsb29rdXAiLCJhZGRMaXN0TWV0aG9kIiwiYWRkR2V0TWV0aG9kIiwibWV0aG9kcyIsImFkZE1ldGhvZCIsIm11dGF0aW9uIiwicmVxdWVzdCIsIm5hbWVzIiwicmVwbHkiXSwibWFwcGluZ3MiOiI7O0FBTUE7O0FBR0FBLG1CQUFTQyxNQUFULENBQWdCO0FBQ2RDLEVBQUFBLFFBQVEsRUFBRSxPQURJO0FBRWRDLEVBQUFBLGVBQWUsRUFBRSxnQ0FGSDtBQUdkQyxFQUFBQSxVQUFVLEVBQUUsWUFIRTtBQUlkQyxFQUFBQSxXQUFXLEVBQUUsU0FKQztBQUtkQyxFQUFBQSxPQUxjLG1CQUtOQyxDQUxNLEVBS1c7QUFDdkI7QUFDQUEsSUFBQUEsQ0FBQyxDQUFDQyxNQUFGLENBQVNDLE9BQVQsQ0FBaUI7QUFDZkMsTUFBQUEsSUFBSSxFQUFFLFNBRFM7QUFFZkMsTUFBQUEsS0FBSyxFQUFFLGdDQUZRO0FBR2ZMLE1BQUFBLE9BSGUsbUJBR1BNLENBSE8sRUFHTTtBQUNuQkEsUUFBQUEsQ0FBQyxDQUFDQyxRQUFGLEdBQWEsSUFBYjtBQUNBRCxRQUFBQSxDQUFDLENBQUNFLFFBQUYsR0FBYSxJQUFiO0FBQ0Q7QUFOYyxLQUFqQjtBQVFBUCxJQUFBQSxDQUFDLENBQUNDLE1BQUYsQ0FBU08sU0FBVCxDQUFtQjtBQUNqQkwsTUFBQUEsSUFBSSxFQUFFLGNBRFc7QUFFakJDLE1BQUFBLEtBQUssRUFBRSx3QkFGVTtBQUdq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LE9BQXJCLENBQTZCO0FBQzNCUCxVQUFBQSxJQUFJLEVBQUUsY0FEcUI7QUFFM0JDLFVBQUFBLEtBQUssRUFBRSx1Q0FGb0I7QUFHM0JMLFVBQUFBLE9BSDJCLG1CQUduQk0sQ0FIbUIsRUFHTjtBQUNuQkEsWUFBQUEsQ0FBQyxDQUFDTSxNQUFGLEdBQVcsSUFBWDtBQUNBTixZQUFBQSxDQUFDLENBQUNDLFFBQUYsR0FBYSxJQUFiO0FBQ0FELFlBQUFBLENBQUMsQ0FBQ08sTUFBRixHQUFXO0FBQ1RqQixjQUFBQSxRQUFRLEVBQUU7QUFERCxhQUFYO0FBR0Q7QUFUMEIsU0FBN0I7QUFXQVUsUUFBQUEsQ0FBQyxDQUFDZSxLQUFGLENBQVFYLFVBQVIsQ0FBbUJDLE9BQW5CLENBQTJCO0FBQ3pCUCxVQUFBQSxJQUFJLEVBQUUsTUFEbUI7QUFFekJDLFVBQUFBLEtBQUssWUFBS0osQ0FBQyxDQUFDSixlQUFQLFVBRm9CO0FBR3pCRyxVQUFBQSxPQUh5QixtQkFHakJNLENBSGlCLEVBR0o7QUFDbkJBLFlBQUFBLENBQUMsQ0FBQ08sTUFBRixHQUFXO0FBQ1RqQixjQUFBQSxRQUFRLEVBQUU7QUFERCxhQUFYO0FBR0Q7QUFQd0IsU0FBM0I7QUFTRDtBQXpEaUIsS0FBcEI7QUEyREQ7QUF0R2EsQ0FBaEIiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge1xuICBQcm9wT2JqZWN0LFxuICBQcm9wTWV0aG9kLFxuICBQcm9wTGluayxcbiAgUHJvcFRleHQsXG59IGZyb20gXCIuLi8uLi9jb21wb25lbnRzL3ByZWx1ZGVcIjtcbmltcG9ydCB7IHJlZ2lzdHJ5IH0gZnJvbSBcIi4uLy4uL3JlZ2lzdHJ5XCI7XG5pbXBvcnQgeyBTeXN0ZW1PYmplY3QgfSBmcm9tIFwiLi4vLi4vc3lzdGVtQ29tcG9uZW50XCI7XG5cbnJlZ2lzdHJ5LnN5c3RlbSh7XG4gIHR5cGVOYW1lOiBcImdyb3VwXCIsXG4gIGRpc3BsYXlUeXBlTmFtZTogXCJBIFN5c3RlbSBJbml0aWF0aXZlIFVzZXIgR3JvdXBcIixcbiAgc2lQYXRoTmFtZTogXCJzaS1hY2NvdW50XCIsXG4gIHNlcnZpY2VOYW1lOiBcImFjY291bnRcIixcbiAgb3B0aW9ucyhjOiBTeXN0ZW1PYmplY3QpIHtcbiAgICAvLyBUaGUgbWFnaWNhbCBhZGQgbGlzdCBhc3NvY2lhdGlvbiBsaXZlcyBoZXJlISBZYXkhIFByb2dyZXNzXG4gICAgYy5maWVsZHMuYWRkVGV4dCh7XG4gICAgICBuYW1lOiBcInVzZXJJZHNcIixcbiAgICAgIGxhYmVsOiBcIlVzZXIgSURzIG9mIG91ciBncm91cHMgbWVtYmVyc1wiLFxuICAgICAgb3B0aW9ucyhwOiBQcm9wVGV4dCkge1xuICAgICAgICBwLnJlcGVhdGVkID0gdHJ1ZTtcbiAgICAgICAgcC5yZXF1aXJlZCA9IHRydWU7XG4gICAgICB9LFxuICAgIH0pO1xuICAgIGMuZmllbGRzLmFkZE9iamVjdCh7XG4gICAgICBuYW1lOiBcInNpUHJvcGVydGllc1wiLFxuICAgICAgbGFiZWw6IFwiU0kgSW50ZXJuYWwgUHJvcGVydGllc1wiLFxuICAgICAgb3B0aW9ucyhwOiBQcm9wT2JqZWN0KSB7XG4gICAgICAgIHAucmVxdWlyZWQgPSB0cnVlO1xuICAgICAgICBwLnByb3BlcnRpZXMuYWRkVGV4dCh7XG4gICAgICAgICAgbmFtZTogXCJiaWxsaW5nQWNjb3VudElkXCIsXG4gICAgICAgICAgbGFiZWw6IFwiQmlsbGluZyBBY2NvdW50IElEXCIsXG4gICAgICAgICAgb3B0aW9ucyhwKSB7XG4gICAgICAgICAgICBwLnJlcXVpcmVkID0gdHJ1ZTtcbiAgICAgICAgICB9LFxuICAgICAgICB9KTtcbiAgICAgIH0sXG4gICAgfSk7XG4gICAgYy5maWVsZHMuYWRkTGluayh7XG4gICAgICBuYW1lOiBcImNhcGFiaWxpdGllc1wiLFxuICAgICAgbGFiZWw6IFwiQXV0aG9yaXplZCBjYXBhYmlsaXRpZXMgZm9yIHRoaXMgdXNlclwiLFxuICAgICAgb3B0aW9ucyhwOiBQcm9wTGluaykge1xuICAgICAgICBwLmhpZGRlbiA9IHRydWU7XG4gICAgICAgIHAucmVwZWF0ZWQgPSB0cnVlO1xuICAgICAgICBwLmxvb2t1cCA9IHtcbiAgICAgICAgICB0eXBlTmFtZTogXCJjYXBhYmlsaXR5XCIsXG4gICAgICAgIH07XG4gICAgICB9LFxuICAgIH0pO1xuXG4gICAgYy5hZGRMaXN0TWV0aG9kKCk7XG4gICAgYy5hZGRHZXRNZXRob2QoKTtcbiAgICBjLm1ldGhvZHMuYWRkTWV0aG9kKHtcbiAgICAgIG5hbWU6IFwiY3JlYXRlXCIsXG4gICAgICBsYWJlbDogXCJDcmVhdGUgYSBHcm91cFwiLFxuICAgICAgb3B0aW9ucyhwOiBQcm9wTWV0aG9kKSB7XG4gICAgICAgIHAubXV0YXRpb24gPSB0cnVlO1xuICAgICAgICBwLnJlcXVlc3QucHJvcGVydGllcy5hZGRUZXh0KHtcbiAgICAgICAgICBuYW1lOiBcIm5hbWVcIixcbiAgICAgICAgICBsYWJlbDogXCJHcm91cCBOYW1lXCIsXG4gICAgICAgICAgb3B0aW9ucyhwKSB7XG4gICAgICAgICAgICBwLnJlcXVpcmVkID0gdHJ1ZTtcbiAgICAgICAgICB9LFxuICAgICAgICB9KTtcbiAgICAgICAgcC5yZXF1ZXN0LnByb3BlcnRpZXMuYWRkVGV4dCh7XG4gICAgICAgICAgbmFtZTogXCJkaXNwbGF5TmFtZVwiLFxuICAgICAgICAgIGxhYmVsOiBcIkdyb3VwIERpc3BsYXkgTmFtZVwiLFxuICAgICAgICAgIG9wdGlvbnMocCkge1xuICAgICAgICAgICAgcC5yZXF1aXJlZCA9IHRydWU7XG4gICAgICAgICAgfSxcbiAgICAgICAgfSk7XG4gICAgICAgIHAucmVxdWVzdC5wcm9wZXJ0aWVzLmFkZFRleHQoe1xuICAgICAgICAgIG5hbWU6IFwidXNlcklkc1wiLFxuICAgICAgICAgIGxhYmVsOiBcIkdyb3VwIHVzZXIgSURzXCIsXG4gICAgICAgICAgb3B0aW9ucyhwKSB7XG4gICAgICAgICAgICBwLnJlcGVhdGVkID0gdHJ1ZTtcbiAgICAgICAgICB9LFxuICAgICAgICB9KTtcbiAgICAgICAgcC5yZXF1ZXN0LnByb3BlcnRpZXMuYWRkTGluayh7XG4gICAgICAgICAgbmFtZTogXCJzaVByb3BlcnRpZXNcIixcbiAgICAgICAgICBsYWJlbDogXCJUaGUgU0kgUHJvcGVydGllcyBmb3IgdGhpcyBVc2VyXCIsXG4gICAgICAgICAgb3B0aW9ucyhwOiBQcm9wTGluaykge1xuICAgICAgICAgICAgcC5yZXF1aXJlZCA9IHRydWU7XG4gICAgICAgICAgICBwLmxvb2t1cCA9IHtcbiAgICAgICAgICAgICAgdHlwZU5hbWU6IFwiZ3JvdXBcIixcbiAgICAgICAgICAgICAgbmFtZXM6IFtcInNpUHJvcGVydGllc1wiXSxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgfSxcbiAgICAgICAgfSk7XG4gICAgICAgIHAucmVxdWVzdC5wcm9wZXJ0aWVzLmFkZExpbmsoe1xuICAgICAgICAgIG5hbWU6IFwiY2FwYWJpbGl0aWVzXCIsXG4gICAgICAgICAgbGFiZWw6IFwiQXV0aG9yaXplZCBjYXBhYmlsaXRpZXMgZm9yIHRoaXMgdXNlclwiLFxuICAgICAgICAgIG9wdGlvbnMocDogUHJvcExpbmspIHtcbiAgICAgICAgICAgIHAuaGlkZGVuID0gdHJ1ZTtcbiAgICAgICAgICAgIHAucmVwZWF0ZWQgPSB0cnVlO1xuICAgICAgICAgICAgcC5sb29rdXAgPSB7XG4gICAgICAgICAgICAgIHR5cGVOYW1lOiBcImNhcGFiaWxpdHlcIixcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgfSxcbiAgICAgICAgfSk7XG4gICAgICAgIHAucmVwbHkucHJvcGVydGllcy5hZGRMaW5rKHtcbiAgICAgICAgICBuYW1lOiBcIml0ZW1cIixcbiAgICAgICAgICBsYWJlbDogYCR7Yy5kaXNwbGF5VHlwZU5hbWV9IEl0ZW1gLFxuICAgICAgICAgIG9wdGlvbnMocDogUHJvcExpbmspIHtcbiAgICAgICAgICAgIHAubG9va3VwID0ge1xuICAgICAgICAgICAgICB0eXBlTmFtZTogXCJncm91cFwiLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICB9LFxuICAgICAgICB9KTtcbiAgICAgIH0sXG4gICAgfSk7XG4gIH0sXG59KTtcbiJdfQ==
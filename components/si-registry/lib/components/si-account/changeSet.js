"use strict";

var _registry = require("../../registry");

_registry.registry.system({
  typeName: "changeSet",
  displayTypeName: "A change set for your system",
  siPathName: "si-account",
  serviceName: "account",
  options: function options(c) {
    c.associations.belongsTo({
      fromFieldPath: ["siProperties", "billingAccountId"],
      typeName: "billingAccount"
    });
    c.associations.belongsTo({
      fromFieldPath: ["siProperties", "organizationId"],
      typeName: "organization"
    });
    c.associations.belongsTo({
      fromFieldPath: ["siProperties", "workspaceId"],
      typeName: "workspace"
    });
    c.associations.hasMany({
      fieldName: "changeSetEntries",
      typeName: "item",
      queryField: "siStorable.changeSetId"
    });
    c.fields.addObject({
      name: "siProperties",
      label: "SI Internal Properties",
      options: function options(p) {
        p.required = true;
        p.properties.addText({
          name: "billingAccountId",
          label: "Billing Account ID",
          options: function options(p) {
            p.required = true;
          }
        });
        p.properties.addText({
          name: "organizationId",
          label: "Organization ID",
          options: function options(p) {
            p.required = true;
          }
        });
        p.properties.addText({
          name: "workspaceId",
          label: "Organization ID",
          options: function options(p) {
            p.required = true;
          }
        });
      }
    });
    c.fields.addText({
      name: "createdByUserId",
      label: "User ID who created this Change Set",
      options: function options(p) {
        p.required = true;
      }
    });
    c.fields.addNumber({
      name: "entryCount",
      label: "Entry Count",
      options: function options(p) {
        p.numberKind = "uint64";
        p.baseDefaultValue = "0";
      }
    });
    c.fields.addEnum({
      name: "status",
      label: "The status of this Change Set",
      options: function options(p) {
        p.variants = ["open", "closed", "abandoned"];
        p.baseDefaultValue = "open";
      }
    });
    c.fields.addText({
      name: "note",
      label: "Note"
    });
    c.addListMethod();
    c.addGetMethod();
    c.methods.addMethod({
      name: "create",
      label: "Create a Change Set",
      options: function options(p) {
        p.mutation = true;
        p.request.properties.addText({
          name: "name",
          label: "Name",
          options: function options(p) {
            p.required = true;
          }
        });
        p.request.properties.addText({
          name: "displayName",
          label: "Display Name"
        });
        p.request.properties.addText({
          name: "note",
          label: "Note"
        });
        p.request.properties.addText({
          name: "workspaceId",
          label: "Workspace ID",
          options: function options(p) {
            p.required = true;
            p.hidden = true;
          }
        });
        p.request.properties.addText({
          name: "createdByUserId",
          label: "User ID who created this Change Set",
          options: function options(p) {
            p.required = true;
          }
        });
        p.reply.properties.addLink({
          name: "item",
          label: "".concat(c.displayTypeName, " Item"),
          options: function options(p) {
            p.lookup = {
              typeName: "changeSet"
            };
          }
        });
      }
    });
  }
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy9jb21wb25lbnRzL3NpLWFjY291bnQvY2hhbmdlU2V0LnRzIl0sIm5hbWVzIjpbInJlZ2lzdHJ5Iiwic3lzdGVtIiwidHlwZU5hbWUiLCJkaXNwbGF5VHlwZU5hbWUiLCJzaVBhdGhOYW1lIiwic2VydmljZU5hbWUiLCJvcHRpb25zIiwiYyIsImFzc29jaWF0aW9ucyIsImJlbG9uZ3NUbyIsImZyb21GaWVsZFBhdGgiLCJoYXNNYW55IiwiZmllbGROYW1lIiwicXVlcnlGaWVsZCIsImZpZWxkcyIsImFkZE9iamVjdCIsIm5hbWUiLCJsYWJlbCIsInAiLCJyZXF1aXJlZCIsInByb3BlcnRpZXMiLCJhZGRUZXh0IiwiYWRkTnVtYmVyIiwibnVtYmVyS2luZCIsImJhc2VEZWZhdWx0VmFsdWUiLCJhZGRFbnVtIiwidmFyaWFudHMiLCJhZGRMaXN0TWV0aG9kIiwiYWRkR2V0TWV0aG9kIiwibWV0aG9kcyIsImFkZE1ldGhvZCIsIm11dGF0aW9uIiwicmVxdWVzdCIsImhpZGRlbiIsInJlcGx5IiwiYWRkTGluayIsImxvb2t1cCJdLCJtYXBwaW5ncyI6Ijs7QUFPQTs7QUFHQUEsbUJBQVNDLE1BQVQsQ0FBZ0I7QUFDZEMsRUFBQUEsUUFBUSxFQUFFLFdBREk7QUFFZEMsRUFBQUEsZUFBZSxFQUFFLDhCQUZIO0FBR2RDLEVBQUFBLFVBQVUsRUFBRSxZQUhFO0FBSWRDLEVBQUFBLFdBQVcsRUFBRSxTQUpDO0FBS2RDLEVBQUFBLE9BTGMsbUJBS05DLENBTE0sRUFLVztBQUN2QkEsSUFBQUEsQ0FBQyxDQUFDQyxZQUFGLENBQWVDLFNBQWYsQ0FBeUI7QUFDdkJDLE1BQUFBLGFBQWEsRUFBRSxDQUFDLGNBQUQsRUFBaUIsa0JBQWpCLENBRFE7QUFFdkJSLE1BQUFBLFFBQVEsRUFBRTtBQUZhLEtBQXpCO0FBSUFLLElBQUFBLENBQUMsQ0FBQ0MsWUFBRixDQUFlQyxTQUFmLENBQXlCO0FBQ3ZCQyxNQUFBQSxhQUFhLEVBQUUsQ0FBQyxjQUFELEVB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LE9BSDJCLG1CQUduQlksQ0FIbUIsRUFHaEI7QUFDVEEsWUFBQUEsQ0FBQyxDQUFDQyxRQUFGLEdBQWEsSUFBYjtBQUNBRCxZQUFBQSxDQUFDLENBQUNlLE1BQUYsR0FBVyxJQUFYO0FBQ0Q7QUFOMEIsU0FBN0I7QUFRQWYsUUFBQUEsQ0FBQyxDQUFDYyxPQUFGLENBQVVaLFVBQVYsQ0FBcUJDLE9BQXJCLENBQTZCO0FBQzNCTCxVQUFBQSxJQUFJLEVBQUUsaUJBRHFCO0FBRTNCQyxVQUFBQSxLQUFLLEVBQUUscUNBRm9CO0FBRzNCWCxVQUFBQSxPQUgyQixtQkFHbkJZLENBSG1CLEVBR2hCO0FBQ1RBLFlBQUFBLENBQUMsQ0FBQ0MsUUFBRixHQUFhLElBQWI7QUFDRDtBQUwwQixTQUE3QjtBQU9BRCxRQUFBQSxDQUFDLENBQUNnQixLQUFGLENBQVFkLFVBQVIsQ0FBbUJlLE9BQW5CLENBQTJCO0FBQ3pCbkIsVUFBQUEsSUFBSSxFQUFFLE1BRG1CO0FBRXpCQyxVQUFBQSxLQUFLLFlBQUtWLENBQUMsQ0FBQ0osZUFBUCxVQUZvQjtBQUd6QkcsVUFBQUEsT0FIeUIsbUJBR2pCWSxDQUhpQixFQUdKO0FBQ25CQSxZQUFBQSxDQUFDLENBQUNrQixNQUFGLEdBQVc7QUFDVGxDLGNBQUFBLFFBQVEsRUFBRTtBQURELGFBQVg7QUFHRDtBQVB3QixTQUEzQjtBQVNEO0FBNUNpQixLQUFwQjtBQThDRDtBQWxJYSxDQUFoQiIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7XG4gIFByb3BFbnVtLFxuICBQcm9wT2JqZWN0LFxuICBQcm9wTWV0aG9kLFxuICBQcm9wTGluayxcbiAgUHJvcE51bWJlcixcbn0gZnJvbSBcIi4uLy4uL2NvbXBvbmVudHMvcHJlbHVkZVwiO1xuaW1wb3J0IHsgcmVnaXN0cnkgfSBmcm9tIFwiLi4vLi4vcmVnaXN0cnlcIjtcbmltcG9ydCB7IFN5c3RlbU9iamVjdCB9IGZyb20gXCIuLi8uLi9zeXN0ZW1Db21wb25lbnRcIjtcblxucmVnaXN0cnkuc3lzdGVtKHtcbiAgdHlwZU5hbWU6IFwiY2hhbmdlU2V0XCIsXG4gIGRpc3BsYXlUeXBlTmFtZTogXCJBIGNoYW5nZSBzZXQgZm9yIHlvdXIgc3lzdGVtXCIsXG4gIHNpUGF0aE5hbWU6IFwic2ktYWNjb3VudFwiLFxuICBzZXJ2aWNlTmFtZTogXCJhY2NvdW50XCIsXG4gIG9wdGlvbnMoYzogU3lzdGVtT2JqZWN0KSB7XG4gICAgYy5hc3NvY2lhdGlvbnMuYmVsb25nc1RvKHtcbiAgICAgIGZyb21GaWVsZFBhdGg6IFtcInNpUHJvcGVydGllc1wiLCBcImJpbGxpbmdBY2NvdW50SWRcIl0sXG4gICAgICB0eXBlTmFtZTogXCJiaWxsaW5nQWNjb3VudFwiLFxuICAgIH0pO1xuICAgIGMuYXNzb2NpYXRpb25zLmJlbG9uZ3NUbyh7XG4gICAgICBmcm9tRmllbGRQYXRoOiBbXCJzaVByb3BlcnRpZXNcIiwgXCJvcmdhbml6YXRpb25JZFwiXSxcbiAgICAgIHR5cGVOYW1lOiBcIm9yZ2FuaXphdGlvblwiLFxuICAgIH0pO1xuICAgIGMuYXNzb2NpYXRpb25zLmJlbG9uZ3NUbyh7XG4gICAgICBmcm9tRmllbGRQYXRoOiBbXCJzaVByb3BlcnRpZXNcIiwgXCJ3b3Jrc3BhY2VJZFwiXSxcbiAgICAgIHR5cGVOYW1lOiBcIndvcmtzcGFjZVwiLFxuICAgIH0pO1xuICAgIGMuYXNzb2NpYXRpb25zLmhhc01hbnkoe1xuICAgICAgZmllbGROYW1lOiBcImNoYW5nZVNldEVudHJpZXNcIixcbiAgICAgIHR5cGVOYW1lOiBcIml0ZW1cIixcbiAgICAgIHF1ZXJ5RmllbGQ6IFwic2lTdG9yYWJsZS5jaGFuZ2VTZXRJZFwiLFxuICAgIH0pO1xuXG4gICAgYy5maWVsZHMuYWRkT2JqZWN0KHtcbiAgICAgIG5hbWU6IFwic2lQcm9wZXJ0aWVzXCIsXG4gICAgICBsYWJlbDogXCJTSSBJbnRlcm5hbCBQcm9wZXJ0aWVzXCIsXG4gICAgICBvcHRpb25zKHA6IFByb3BPYmplY3QpIHtcbiAgICAgICAgcC5yZXF1aXJlZCA9IHRydWU7XG4gICAgICAgIHAucHJvcGVydGllcy5hZGRUZXh0KHtcbiAgICAgICAgICBuYW1lOiBcImJpbGxpbmdBY2NvdW50SWRcIixcbiAgICAgICAgICBsYWJlbDogXCJCaWxsaW5nIEFjY291bnQgSURcIixcbiAgICAgICAgICBvcHRpb25zKHApIHtcbiAgICAgICAgICAgIHAucmVxdWlyZWQgPSB0cnVlO1xuICAgICAgICAgIH0sXG4gICAgICAgIH0pO1xuICAgICAgICBwLnByb3BlcnRpZXMuYWRkVGV4dCh7XG4gICAgICAgICAgbmFtZTogXCJvcmdhbml6YXRpb25JZFwiLFxuICAgICAgICAgIGxhYmVsOiBcIk9yZ2FuaXphdGlvbiBJRFwiLFxuICAgICAgICAgIG9wdGlvbnMocCkge1xuICAgICAgICAgICAgcC5yZXF1aXJlZCA9IHRydWU7XG4gICAgICAgICAgfSxcbiAgICAgICAgfSk7XG4gICAgICAgIHAucHJvcGVydGllcy5hZGRUZXh0KHtcbiAgICAgICAgICBuYW1lOiBcIndvcmtzcGFjZUlkXCIsXG4gICAgICAgICAgbGFiZWw6IFwiT3JnYW5pemF0aW9uIElEXCIsXG4gICAgICAgICAgb3B0aW9ucyhwKSB7XG4gICAgICAgICAgICBwLnJlcXVpcmVkID0gdHJ1ZTtcbiAgICAgICAgICB9LFxuICAgICAgICB9KTtcbiAgICAgIH0sXG4gICAgfSk7XG5cbiAgICBjLmZpZWxkcy5hZGRUZXh0KHtcbiAgICAgIG5hbWU6IFwiY3JlYXRlZEJ5VXNlcklkXCIsXG4gICAgICBsYWJlbDogXCJVc2VyIElEIHdobyBjcmVhdGVkIHRoaXMgQ2hhbmdlIFNldFwiLFxuICAgICAgb3B0aW9ucyhwKSB7XG4gICAgICAgIHAucmVxdWlyZWQgPSB0cnVlO1xuICAgICAgfSxcbiAgICB9KTtcbiAgICBjLmZpZWxkcy5hZGROdW1iZXIoe1xuICAgICAgbmFtZTogXCJlbnRyeUNvdW50XCIsXG4gICAgICBsYWJlbDogXCJFbnRyeSBDb3VudFwiLFxuICAgICAgb3B0aW9ucyhwOiBQcm9wTnVtYmVyKSB7XG4gICAgICAgIHAubnVtYmVyS2luZCA9IFwidWludDY0XCI7XG4gICAgICAgIHAuYmFzZURlZmF1bHRWYWx1ZSA9IFwiMFwiO1xuICAgICAgfSxcbiAgICB9KTtcbiAgICBjLmZpZWxkcy5hZGRFbnVtKHtcbiAgICAgIG5hbWU6IFwic3RhdHVzXCIsXG4gICAgICBsYWJlbDogXCJUaGUgc3RhdHVzIG9mIHRoaXMgQ2hhbmdlIFNldFwiLFxuICAgICAgb3B0aW9ucyhwOiBQcm9wRW51bSkge1xuICAgICAgICBwLnZhcmlhbnRzID0gW1wib3BlblwiLCBcImNsb3NlZFwiLCBcImFiYW5kb25lZFwiXTtcbiAgICAgICAgcC5iYXNlRGVmYXVsdFZhbHVlID0gXCJvcGVuXCI7XG4gICAgICB9LFxuICAgIH0pO1xuICAgIGMuZmllbGRzLmFkZFRleHQoe1xuICAgICAgbmFtZTogXCJub3RlXCIsXG4gICAgICBsYWJlbDogXCJOb3RlXCIsXG4gICAgfSk7XG5cbiAgICBjLmFkZExpc3RNZXRob2QoKTtcbiAgICBjLmFkZEdldE1ldGhvZCgpO1xuXG4gICAgYy5tZXRob2RzLmFkZE1ldGhvZCh7XG4gICAgICBuYW1lOiBcImNyZWF0ZVwiLFxuICAgICAgbGFiZWw6IFwiQ3JlYXRlIGEgQ2hhbmdlIFNldFwiLFxuICAgICAgb3B0aW9ucyhwOiBQcm9wTWV0aG9kKSB7XG4gICAgICAgIHAubXV0YXRpb24gPSB0cnVlO1xuICAgICAgICBwLnJlcXVlc3QucHJvcGVydGllcy5hZGRUZXh0KHtcbiAgICAgICAgICBuYW1lOiBcIm5hbWVcIixcbiAgICAgICAgICBsYWJlbDogXCJOYW1lXCIsXG4gICAgICAgICAgb3B0aW9ucyhwKSB7XG4gICAgICAgICAgICBwLnJlcXVpcmVkID0gdHJ1ZTtcbiAgICAgICAgICB9LFxuICAgICAgICB9KTtcbiAgICAgICAgcC5yZXF1ZXN0LnByb3BlcnRpZXMuYWRkVGV4dCh7XG4gICAgICAgICAgbmFtZTogXCJkaXNwbGF5TmFtZVwiLFxuICAgICAgICAgIGxhYmVsOiBcIkRpc3BsYXkgTmFtZVwiLFxuICAgICAgICB9KTtcbiAgICAgICAgcC5yZXF1ZXN0LnByb3BlcnRpZXMuYWRkVGV4dCh7XG4gICAgICAgICAgbmFtZTogXCJub3RlXCIsXG4gICAgICAgICAgbGFiZWw6IFwiTm90ZVwiLFxuICAgICAgICB9KTtcbiAgICAgICAgcC5yZXF1ZXN0LnByb3BlcnRpZXMuYWRkVGV4dCh7XG4gICAgICAgICAgbmFtZTogXCJ3b3Jrc3BhY2VJZFwiLFxuICAgICAgICAgIGxhYmVsOiBgV29ya3NwYWNlIElEYCxcbiAgICAgICAgICBvcHRpb25zKHApIHtcbiAgICAgICAgICAgIHAucmVxdWlyZWQgPSB0cnVlO1xuICAgICAgICAgICAgcC5oaWRkZW4gPSB0cnVlO1xuICAgICAgICAgIH0sXG4gICAgICAgIH0pO1xuICAgICAgICBwLnJlcXVlc3QucHJvcGVydGllcy5hZGRUZXh0KHtcbiAgICAgICAgICBuYW1lOiBcImNyZWF0ZWRCeVVzZXJJZFwiLFxuICAgICAgICAgIGxhYmVsOiBcIlVzZXIgSUQgd2hvIGNyZWF0ZWQgdGhpcyBDaGFuZ2UgU2V0XCIsXG4gICAgICAgICAgb3B0aW9ucyhwKSB7XG4gICAgICAgICAgICBwLnJlcXVpcmVkID0gdHJ1ZTtcbiAgICAgICAgICB9LFxuICAgICAgICB9KTtcbiAgICAgICAgcC5yZXBseS5wcm9wZXJ0aWVzLmFkZExpbmsoe1xuICAgICAgICAgIG5hbWU6IFwiaXRlbVwiLFxuICAgICAgICAgIGxhYmVsOiBgJHtjLmRpc3BsYXlUeXBlTmFtZX0gSXRlbWAsXG4gICAgICAgICAgb3B0aW9ucyhwOiBQcm9wTGluaykge1xuICAgICAgICAgICAgcC5sb29rdXAgPSB7XG4gICAgICAgICAgICAgIHR5cGVOYW1lOiBcImNoYW5nZVNldFwiLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICB9LFxuICAgICAgICB9KTtcbiAgICAgIH0sXG4gICAgfSk7XG4gIH0sXG59KTtcbiJdfQ==
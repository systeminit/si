"use strict";

var _registry = require("../../registry");

_registry.registry.system({
  typeName: "organization",
  displayTypeName: "A System Initiative Organization",
  siPathName: "si-account",
  serviceName: "account",
  options: function options(c) {
    c.associations.belongsTo({
      fromFieldPath: ["siProperties", "billingAccountId"],
      typeName: "billingAccount"
    });
    c.associations.hasMany({
      fieldName: "workspaces",
      typeName: "workspace"
    });
    c.fields.addObject({
      name: "siProperties",
      label: "SI Internal Properties",
      options: function options(p) {
        p.required = true;
        p.properties.addText({
          name: "billingAccountId",
          label: "Billing Account ID",
          options: function options(p) {
            p.required = true;
          }
        });
      }
    });
    c.addListMethod();
    c.addGetMethod();
    c.methods.addMethod({
      name: "create",
      label: "Create an Organization",
      options: function options(p) {
        p.mutation = true;
        p.request.properties.addText({
          name: "name",
          label: "User Name",
          options: function options(p) {
            p.required = true;
          }
        });
        p.request.properties.addText({
          name: "displayName",
          label: "User Display Name",
          options: function options(p) {
            p.required = true;
          }
        });
        p.request.properties.addLink({
          name: "siProperties",
          label: "The SI Properties for this User",
          options: function options(p) {
            p.required = true;
            p.lookup = {
              typeName: "organization",
              names: ["siProperties"]
            };
          }
        });
        p.reply.properties.addLink({
          name: "item",
          label: "".concat(c.displayTypeName, " Item"),
          options: function options(p) {
            p.lookup = {
              typeName: "organization"
            };
          }
        });
      }
    });
  }
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy9jb21wb25lbnRzL3NpLWFjY291bnQvb3JnYW5pemF0aW9uLnRzIl0sIm5hbWVzIjpbInJlZ2lzdHJ5Iiwic3lzdGVtIiwidHlwZU5hbWUiLCJkaXNwbGF5VHlwZU5hbWUiLCJzaVBhdGhOYW1lIiwic2VydmljZU5hbWUiLCJvcHRpb25zIiwiYyIsImFzc29jaWF0aW9ucyIsImJlbG9uZ3NUbyIsImZyb21GaWVsZFBhdGgiLCJoYXNNYW55IiwiZmllbGROYW1lIiwiZmllbGRzIiwiYWRkT2JqZWN0IiwibmFtZSIsImxhYmVsIiwicCIsInJlcXVpcmVkIiwicHJvcGVydGllcyIsImFkZFRleHQiLCJhZGRMaXN0TWV0aG9kIiwiYWRkR2V0TWV0aG9kIiwibWV0aG9kcyIsImFkZE1ldGhvZCIsIm11dGF0aW9uIiwicmVxdWVzdCIsImFkZExpbmsiLCJsb29rdXAiLCJuYW1lcyIsInJlcGx5Il0sIm1hcHBpbmdzIjoiOztBQUNBOztBQUdBQSxtQkFBU0MsTUFBVCxDQUFnQjtBQUNkQyxFQUFBQSxRQUFRLEVBQUUsY0FESTtBQUVkQyxFQUFBQSxlQUFlLEVBQUUsa0NBRkg7QUFHZEMsRUFBQUEsVUFBVSxFQUFFLFlBSEU7QUFJZEMsRUFBQUEsV0FBVyxFQUFFLFNBSkM7QUFLZEMsRUFBQUEsT0FMYyxtQkFLTkMsQ0FMTSxFQUtXO0FBQ3ZCQSxJQUFBQSxDQUFDLENBQUNDLFlBQUYsQ0FBZUMsU0FBZixDQUF5QjtBQUN2QkMsTUFBQUEsYUFBYSxFQUFFLENBQUMsY0FBRCxFQUFpQixrQkFBakIsQ0FEUTtBQUV2QlIsTUFBQUEsUUFBUSxFQUFFO0FBRmEsS0FBekI7QUFLQUssSUFBQUEsQ0FBQyxDQUFDQyxZQUFGLENBQWVHLE9BQWYsQ0FBdUI7QUFDckJDLE1BQUFBLFNBQVMsRUFBRSxZQURVO0FBRXJCVixNQUFBQSxRQUFRLEVBQUU7QUFGVyxLQUF2QjtBQUtBSyxJQUFBQSxDQUFDLENBQUNNLE1BQUYsQ0FBU0MsU0FBVCxDQUFtQjtBQUNqQkMsTUFBQUEsSUFBSSxFQUFFLGNBRFc7QUFFakJDLE1BQUFBLEtBQUssRUFBRSx3QkFGVTtBQUdqQlYsTUFBQUEsT0FIaUIsbUJBR1RXLENBSFMsRUFHTTtBQUNyQkEsUUFBQUEsQ0FBQyxDQUFDQyxRQUFGLEdBQWEsSUFBYjtBQUNBRCxRQUFBQSxDQUFDLENBQUNFLFVBQUYsQ0FBYUMsT0FBYixDQUFxQjtBQUNuQkwsVUFBQUEsSUFBSSxFQUFFLGtCQURhO0FBRW5CQyxVQUFBQSxLQUFLLEVBQUUsb0JBRlk7QUFHbkJWLFVBQUFBLE9BSG1CLG1CQUdYVyxDQUhXLEVBR1I7QUFDVEEsWUFBQUEsQ0FBQyxDQUFDQyxRQUFGLEdBQWEsSUFBYjtBQUNEO0FBTGtCLFNBQXJCO0FBT0Q7QUFaZ0IsS0FBbkI7QUFjQVgsSUFBQUEsQ0FBQyxDQUFDYyxhQUFGO0FBQ0FkLElBQUFBLENBQUMsQ0FBQ2UsWUFBRjtBQUNBZixJQUFBQSxDQUFDLENBQUNnQixPQUFGLENBQVVDLFNBQVYsQ0FBb0I7QUFDbEJULE1BQUFBLElBQUksRUFBRSxRQURZO0FBRWxCQyxNQUFBQSxLQUFLLEVBQUUsd0JBRlc7QUFHbEJWLE1BQUFBLE9BSGtCLG1CQUdWVyxDQUhVLEVBR0s7QUFDckJBLFFBQUFBLENBQUMsQ0FBQ1EsUUFBRixHQUFhLElBQWI7QUFDQVIsUUFBQUEsQ0FBQyxDQUFDUyxPQUFGLENBQVVQLFVBQVYsQ0FBcUJDLE9BQXJCLENBQTZCO0FBQzNCTCxVQUFBQSxJQUFJLEVBQUUsTUFEcUI7QUFFM0JDLFVBQUFBLEtBQUssRUFBRSxXQUZvQjtBQUczQlYsVUFBQUEsT0FIMkIsbUJBR25CVyxDQUhtQixFQUdoQjtBQUNUQSxZQUFBQSxDQUFDLENBQUNDLFFBQUYsR0FBYSxJQUFiO0FBQ0Q7QUFMMEIsU0FBN0I7QUFPQUQsUUFBQUEsQ0FBQyxDQUFDUyxPQUFGLENBQVVQLFVBQVYsQ0FBcUJDLE9BQXJCLENBQTZCO0FBQzNCTCxVQUFBQSxJQUFJLEVBQUUsYUFEcUI7QUFFM0JDLFVBQUFBLEtBQUssRUFBRSxtQkFGb0I7QUFHM0JWLFVBQUFBLE9BSDJCLG1CQUduQlcsQ0FIbUIsRUFHaEI7QUFDVEEsWUFBQUEsQ0FBQyxDQUFDQyxRQUFGLEdBQWEsSUFBYjtBQUNEO0FBTDBCLFNBQTdCO0FBT0FELFFBQUFBLENBQUMsQ0FBQ1MsT0FBRixDQUFVUCxVQUFWLENBQXFCUSxPQUFyQixDQUE2QjtBQUMzQlosVUFBQUEsSUFBSSxFQUFFLGNBRHFCO0FBRTNCQyxVQUFBQSxLQUFLLEVBQUUsaUNBRm9CO0FBRzNCVixVQUFBQSxPQUgyQixtQkFHbkJXLENBSG1CLEVBR047QUFDbkJBLFlBQUFBLENBQUMsQ0FBQ0MsUUFBRixHQUFhLElBQWI7QUFDQUQsWUFBQUEsQ0FBQyxDQUFDVyxNQUFGLEdBQVc7QUFDVDFCLGNBQUFBLFFBQVEsRUFBRSxjQUREO0FBRVQyQixjQUFBQSxLQUFLLEVBQUUsQ0FBQyxjQUFEO0FBRkUsYUFBWDtBQUlEO0FBVDBCLFNBQTdCO0FBV0FaLFFBQUFBLENBQUMsQ0FBQ2EsS0FBRixDQUFRWCxVQUFSLENBQW1CUSxPQUFuQixDQUEyQjtBQUN6QlosVUFBQUEsSUFBSSxFQUFFLE1BRG1CO0FBRXpCQyxVQUFBQSxLQUFLLFlBQUtULENBQUMsQ0FBQ0osZUFBUCxVQUZvQjtBQUd6QkcsVUFBQUEsT0FIeUIsbUJBR2pCVyxDQUhpQixFQUdKO0FBQ25CQSxZQUFBQSxDQUFDLENBQUNXLE1BQUYsR0FBVztBQUNUMUIsY0FBQUEsUUFBUSxFQUFFO0FBREQsYUFBWDtBQUdEO0FBUHdCLFNBQTNCO0FBU0Q7QUF2Q2lCLEtBQXBCO0FBeUNEO0FBekVhLENBQWhCIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgUHJvcE9iamVjdCwgUHJvcE1ldGhvZCwgUHJvcExpbmsgfSBmcm9tIFwiLi4vLi4vY29tcG9uZW50cy9wcmVsdWRlXCI7XG5pbXBvcnQgeyByZWdpc3RyeSB9IGZyb20gXCIuLi8uLi9yZWdpc3RyeVwiO1xuaW1wb3J0IHsgU3lzdGVtT2JqZWN0IH0gZnJvbSBcIi4uLy4uL3N5c3RlbUNvbXBvbmVudFwiO1xuXG5yZWdpc3RyeS5zeXN0ZW0oe1xuICB0eXBlTmFtZTogXCJvcmdhbml6YXRpb25cIixcbiAgZGlzcGxheVR5cGVOYW1lOiBcIkEgU3lzdGVtIEluaXRpYXRpdmUgT3JnYW5pemF0aW9uXCIsXG4gIHNpUGF0aE5hbWU6IFwic2ktYWNjb3VudFwiLFxuICBzZXJ2aWNlTmFtZTogXCJhY2NvdW50XCIsXG4gIG9wdGlvbnMoYzogU3lzdGVtT2JqZWN0KSB7XG4gICAgYy5hc3NvY2lhdGlvbnMuYmVsb25nc1RvKHtcbiAgICAgIGZyb21GaWVsZFBhdGg6IFtcInNpUHJvcGVydGllc1wiLCBcImJpbGxpbmdBY2NvdW50SWRcIl0sXG4gICAgICB0eXBlTmFtZTogXCJiaWxsaW5nQWNjb3VudFwiLFxuICAgIH0pO1xuXG4gICAgYy5hc3NvY2lhdGlvbnMuaGFzTWFueSh7XG4gICAgICBmaWVsZE5hbWU6IFwid29ya3NwYWNlc1wiLFxuICAgICAgdHlwZU5hbWU6IFwid29ya3NwYWNlXCIsXG4gICAgfSk7XG5cbiAgICBjLmZpZWxkcy5hZGRPYmplY3Qoe1xuICAgICAgbmFtZTogXCJzaVByb3BlcnRpZXNcIixcbiAgICAgIGxhYmVsOiBcIlNJIEludGVybmFsIFByb3BlcnRpZXNcIixcbiAgICAgIG9wdGlvbnMocDogUHJvcE9iamVjdCkge1xuICAgICAgICBwLnJlcXVpcmVkID0gdHJ1ZTtcbiAgICAgICAgcC5wcm9wZXJ0aWVzLmFkZFRleHQoe1xuICAgICAgICAgIG5hbWU6IFwiYmlsbGluZ0FjY291bnRJZFwiLFxuICAgICAgICAgIGxhYmVsOiBcIkJpbGxpbmcgQWNjb3VudCBJRFwiLFxuICAgICAgICAgIG9wdGlvbnMocCkge1xuICAgICAgICAgICAgcC5yZXF1aXJlZCA9IHRydWU7XG4gICAgICAgICAgfSxcbiAgICAgICAgfSk7XG4gICAgICB9LFxuICAgIH0pO1xuICAgIGMuYWRkTGlzdE1ldGhvZCgpO1xuICAgIGMuYWRkR2V0TWV0aG9kKCk7XG4gICAgYy5tZXRob2RzLmFkZE1ldGhvZCh7XG4gICAgICBuYW1lOiBcImNyZWF0ZVwiLFxuICAgICAgbGFiZWw6IFwiQ3JlYXRlIGFuIE9yZ2FuaXphdGlvblwiLFxuICAgICAgb3B0aW9ucyhwOiBQcm9wTWV0aG9kKSB7XG4gICAgICAgIHAubXV0YXRpb24gPSB0cnVlO1xuICAgICAgICBwLnJlcXVlc3QucHJvcGVydGllcy5hZGRUZXh0KHtcbiAgICAgICAgICBuYW1lOiBcIm5hbWVcIixcbiAgICAgICAgICBsYWJlbDogXCJVc2VyIE5hbWVcIixcbiAgICAgICAgICBvcHRpb25zKHApIHtcbiAgICAgICAgICAgIHAucmVxdWlyZWQgPSB0cnVlO1xuICAgICAgICAgIH0sXG4gICAgICAgIH0pO1xuICAgICAgICBwLnJlcXVlc3QucHJvcGVydGllcy5hZGRUZXh0KHtcbiAgICAgICAgICBuYW1lOiBcImRpc3BsYXlOYW1lXCIsXG4gICAgICAgICAgbGFiZWw6IFwiVXNlciBEaXNwbGF5IE5hbWVcIixcbiAgICAgICAgICBvcHRpb25zKHApIHtcbiAgICAgICAgICAgIHAucmVxdWlyZWQgPSB0cnVlO1xuICAgICAgICAgIH0sXG4gICAgICAgIH0pO1xuICAgICAgICBwLnJlcXVlc3QucHJvcGVydGllcy5hZGRMaW5rKHtcbiAgICAgICAgICBuYW1lOiBcInNpUHJvcGVydGllc1wiLFxuICAgICAgICAgIGxhYmVsOiBcIlRoZSBTSSBQcm9wZXJ0aWVzIGZvciB0aGlzIFVzZXJcIixcbiAgICAgICAgICBvcHRpb25zKHA6IFByb3BMaW5rKSB7XG4gICAgICAgICAgICBwLnJlcXVpcmVkID0gdHJ1ZTtcbiAgICAgICAgICAgIHAubG9va3VwID0ge1xuICAgICAgICAgICAgICB0eXBlTmFtZTogXCJvcmdhbml6YXRpb25cIixcbiAgICAgICAgICAgICAgbmFtZXM6IFtcInNpUHJvcGVydGllc1wiXSxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgfSxcbiAgICAgICAgfSk7XG4gICAgICAgIHAucmVwbHkucHJvcGVydGllcy5hZGRMaW5rKHtcbiAgICAgICAgICBuYW1lOiBcIml0ZW1cIixcbiAgICAgICAgICBsYWJlbDogYCR7Yy5kaXNwbGF5VHlwZU5hbWV9IEl0ZW1gLFxuICAgICAgICAgIG9wdGlvbnMocDogUHJvcExpbmspIHtcbiAgICAgICAgICAgIHAubG9va3VwID0ge1xuICAgICAgICAgICAgICB0eXBlTmFtZTogXCJvcmdhbml6YXRpb25cIixcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgfSxcbiAgICAgICAgfSk7XG4gICAgICB9LFxuICAgIH0pO1xuICB9LFxufSk7XG5cbiJdfQ==
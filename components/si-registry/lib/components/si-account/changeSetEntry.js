"use strict";

var _registry = require("../../registry");

_registry.registry.system({
  typeName: "changeSetEntry",
  displayTypeName: "An entry inside of a change set",
  siPathName: "si-account",
  serviceName: "account",
  options: function options(c) {
    c.associations.belongsTo({
      fromFieldPath: ["siProperties", "billingAccountId"],
      typeName: "billingAccount"
    });
    c.associations.belongsTo({
      fromFieldPath: ["siProperties", "organizationId"],
      typeName: "organization"
    });
    c.associations.belongsTo({
      fromFieldPath: ["siProperties", "workspaceId"],
      typeName: "workspace"
    });
    c.associations.belongsTo({
      fromFieldPath: ["siProperties", "changeSetId"],
      typeName: "changeSet"
    });
    c.fields.addObject({
      name: "siProperties",
      label: "SI Internal Properties",
      options: function options(p) {
        p.required = true;
        p.properties.addText({
          name: "billingAccountId",
          label: "Billing Account ID",
          options: function options(p) {
            p.required = true;
          }
        });
        p.properties.addText({
          name: "organizationId",
          label: "Organization ID",
          options: function options(p) {
            p.required = true;
          }
        });
        p.properties.addText({
          name: "workspaceId",
          label: "Organization ID",
          options: function options(p) {
            p.required = true;
          }
        });
        p.properties.addText({
          name: "changeSetId",
          label: "Change Set ID",
          options: function options(p) {
            p.required = true;
          }
        });
      }
    });
    c.fields.addText({
      name: "createdByUserId",
      label: "User ID who created this Change Set Entry",
      options: function options(p) {
        p.required = true;
      }
    });
    c.fields.addText({
      name: "itemId",
      label: "The ID of the item this Change Set Entry points at",
      options: function options(p) {
        p.required = true;
      }
    });
    c.fields.addEnum({
      name: "status",
      label: "The status of this Change Set Entry",
      options: function options(p) {
        p.variants = ["open", "closed", "abandoned"];
        p.baseDefaultValue = "open";
      }
    });
    c.addListMethod();
    c.addGetMethod();
    c.methods.addMethod({
      name: "create",
      label: "Create a Change Set Entry",
      options: function options(p) {
        p.mutation = true;
        p.hidden = true;
        p.skip = true;
        p.isPrivate = true;
        p.request.properties.addText({
          name: "name",
          label: "Name of the changeset entry",
          options: function options(p) {
            p.required = true;
          }
        });
        p.request.properties.addText({
          name: "displayName",
          label: "Change Set entry display name",
          options: function options(p) {
            p.required = true;
          }
        });
        p.request.properties.addLink({
          name: "siProperties",
          label: "The SI Properties for this Change Set Entry",
          options: function options(p) {
            p.required = true;
            p.lookup = {
              typeName: "changeSetEntry",
              names: ["siProperties"]
            };
          }
        });
        p.request.properties.addText({
          name: "createdByUserId",
          label: "User ID who created this Change Set Entry",
          options: function options(p) {
            p.required = true;
          }
        });
        p.reply.properties.addLink({
          name: "item",
          label: "".concat(c.displayTypeName, " Item"),
          options: function options(p) {
            p.lookup = {
              typeName: "changeSetEntry"
            };
          }
        });
      }
    });
  }
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy9jb21wb25lbnRzL3NpLWFjY291bnQvY2hhbmdlU2V0RW50cnkudHMiXSwibmFtZXMiOlsicmVnaXN0cnkiLCJzeXN0ZW0iLCJ0eXBlTmFtZSIsImRpc3BsYXlUeXBlTmFtZSIsInNpUGF0aE5hbWUiLCJzZXJ2aWNlTmFtZSIsIm9wdGlvbnMiLCJjIiwiYXNzb2NpYXRpb25zIiwiYmVsb25nc1RvIiwiZnJvbUZpZWxkUGF0aCIsImZpZWxkcyIsImFkZE9iamVjdCIsIm5hbWUiLCJsYWJlbCIsInAiLCJyZXF1aXJlZCIsInByb3BlcnRpZXMiLCJhZGRUZXh0IiwiYWRkRW51bSIsInZhcmlhbnRzIiwiYmFzZURlZmF1bHRWYWx1ZSIsImFkZExpc3RNZXRob2QiLCJhZGRHZXRNZXRob2QiLCJtZXRob2RzIiwiYWRkTWV0aG9kIiwibXV0YXRpb24iLCJoaWRkZW4iLCJza2lwIiwiaXNQcml2YXRlIiwicmVxdWVzdCIsImFkZExpbmsiLCJsb29rdXAiLCJuYW1lcyIsInJlcGx5Il0sIm1hcHBpbmdzIjoiOztBQU1BOztBQUdBQSxtQkFBU0MsTUFBVCxDQUFnQjtBQUNkQyxFQUFBQSxRQUFRLEVBQUUsZ0JBREk7QUFFZEMsRUFBQUEsZUFBZSxFQUFFLGlDQUZIO0FBR2RDLEVBQUFBLFVBQVUsRUFBRSxZQUhFO0FBSWRDLEVBQUFBLFdBQVcsRUFBRSxTQUpDO0FBS2RDLEVBQUFBLE9BTGMsbUJBS05DLENBTE0sRUFLVztBQUN2QkEsSUFBQUEsQ0FBQyxDQUFDQyxZQUFGLENBQWVDLFNBQWYsQ0FBeUI7QUFDdkJDLE1BQUFBLGFBQWEsRUFBRSxDQUFDLGNBQUQsRUFBaUIsa0JBQWpCLENBRFE7QUFFdkJSLE1BQUFBLFFBQVEsRUFBRTtBQUZhLEtBQXpCO0FBSUFLLElBQUFBLENBQUMsQ0FBQ0MsWUFBRixDQUFlQyxTQUFmLENBQXlCO0FBQ3ZCQyxNQUFBQSxhQUFhLEVBQUUsQ0FBQyxjQUFELEVBQWlCLGdCQUFqQixDQURRO0FBRXZCUixNQUFB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Q0FBcUJjLE9BQXJCLENBQTZCO0FBQzNCbEIsVUFBQUEsSUFBSSxFQUFFLGNBRHFCO0FBRTNCQyxVQUFBQSxLQUFLLEVBQUUsNkNBRm9CO0FBRzNCUixVQUFBQSxPQUgyQixtQkFHbkJTLENBSG1CLEVBR047QUFDbkJBLFlBQUFBLENBQUMsQ0FBQ0MsUUFBRixHQUFhLElBQWI7QUFDQUQsWUFBQUEsQ0FBQyxDQUFDaUIsTUFBRixHQUFXO0FBQ1Q5QixjQUFBQSxRQUFRLEVBQUUsZ0JBREQ7QUFFVCtCLGNBQUFBLEtBQUssRUFBRSxDQUFDLGNBQUQ7QUFGRSxhQUFYO0FBSUQ7QUFUMEIsU0FBN0I7QUFXQWxCLFFBQUFBLENBQUMsQ0FBQ2UsT0FBRixDQUFVYixVQUFWLENBQXFCQyxPQUFyQixDQUE2QjtBQUMzQkwsVUFBQUEsSUFBSSxFQUFFLGlCQURxQjtBQUUzQkMsVUFBQUEsS0FBSyxFQUFFLDJDQUZvQjtBQUczQlIsVUFBQUEsT0FIMkIsbUJBR25CUyxDQUhtQixFQUdoQjtBQUNUQSxZQUFBQSxDQUFDLENBQUNDLFFBQUYsR0FBYSxJQUFiO0FBQ0Q7QUFMMEIsU0FBN0I7QUFPQUQsUUFBQUEsQ0FBQyxDQUFDbUIsS0FBRixDQUFRakIsVUFBUixDQUFtQmMsT0FBbkIsQ0FBMkI7QUFDekJsQixVQUFBQSxJQUFJLEVBQUUsTUFEbUI7QUFFekJDLFVBQUFBLEtBQUssWUFBS1AsQ0FBQyxDQUFDSixlQUFQLFVBRm9CO0FBR3pCRyxVQUFBQSxPQUh5QixtQkFHakJTLENBSGlCLEVBR0o7QUFDbkJBLFlBQUFBLENBQUMsQ0FBQ2lCLE1BQUYsR0FBVztBQUNUOUIsY0FBQUEsUUFBUSxFQUFFO0FBREQsYUFBWDtBQUdEO0FBUHdCLFNBQTNCO0FBU0Q7QUFsRGlCLEtBQXBCO0FBb0REO0FBM0lhLENBQWhCIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHtcbiAgUHJvcEVudW0sXG4gIFByb3BPYmplY3QsXG4gIFByb3BNZXRob2QsXG4gIFByb3BMaW5rLFxufSBmcm9tIFwiLi4vLi4vY29tcG9uZW50cy9wcmVsdWRlXCI7XG5pbXBvcnQgeyByZWdpc3RyeSB9IGZyb20gXCIuLi8uLi9yZWdpc3RyeVwiO1xuaW1wb3J0IHsgU3lzdGVtT2JqZWN0IH0gZnJvbSBcIi4uLy4uL3N5c3RlbUNvbXBvbmVudFwiO1xuXG5yZWdpc3RyeS5zeXN0ZW0oe1xuICB0eXBlTmFtZTogXCJjaGFuZ2VTZXRFbnRyeVwiLFxuICBkaXNwbGF5VHlwZU5hbWU6IFwiQW4gZW50cnkgaW5zaWRlIG9mIGEgY2hhbmdlIHNldFwiLFxuICBzaVBhdGhOYW1lOiBcInNpLWFjY291bnRcIixcbiAgc2VydmljZU5hbWU6IFwiYWNjb3VudFwiLFxuICBvcHRpb25zKGM6IFN5c3RlbU9iamVjdCkge1xuICAgIGMuYXNzb2NpYXRpb25zLmJlbG9uZ3NUbyh7XG4gICAgICBmcm9tRmllbGRQYXRoOiBbXCJzaVByb3BlcnRpZXNcIiwgXCJiaWxsaW5nQWNjb3VudElkXCJdLFxuICAgICAgdHlwZU5hbWU6IFwiYmlsbGluZ0FjY291bnRcIixcbiAgICB9KTtcbiAgICBjLmFzc29jaWF0aW9ucy5iZWxvbmdzVG8oe1xuICAgICAgZnJvbUZpZWxkUGF0aDogW1wic2lQcm9wZXJ0aWVzXCIsIFwib3JnYW5pemF0aW9uSWRcIl0sXG4gICAgICB0eXBlTmFtZTogXCJvcmdhbml6YXRpb25cIixcbiAgICB9KTtcbiAgICBjLmFzc29jaWF0aW9ucy5iZWxvbmdzVG8oe1xuICAgICAgZnJvbUZpZWxkUGF0aDogW1wic2lQcm9wZXJ0aWVzXCIsIFwid29ya3NwYWNlSWRcIl0sXG4gICAgICB0eXBlTmFtZTogXCJ3b3Jrc3BhY2VcIixcbiAgICB9KTtcbiAgICBjLmFzc29jaWF0aW9ucy5iZWxvbmdzVG8oe1xuICAgICAgZnJvbUZpZWxkUGF0aDogW1wic2lQcm9wZXJ0aWVzXCIsIFwiY2hhbmdlU2V0SWRcIl0sXG4gICAgICB0eXBlTmFtZTogXCJjaGFuZ2VTZXRcIixcbiAgICB9KTtcblxuICAgIGMuZmllbGRzLmFkZE9iamVjdCh7XG4gICAgICBuYW1lOiBcInNpUHJvcGVydGllc1wiLFxuICAgICAgbGFiZWw6IFwiU0kgSW50ZXJuYWwgUHJvcGVydGllc1wiLFxuICAgICAgb3B0aW9ucyhwOiBQcm9wT2JqZWN0KSB7XG4gICAgICAgIHAucmVxdWlyZWQgPSB0cnVlO1xuICAgICAgICBwLnByb3BlcnRpZXMuYWRkVGV4dCh7XG4gICAgICAgICAgbmFtZTogXCJiaWxsaW5nQWNjb3VudElkXCIsXG4gICAgICAgICAgbGFiZWw6IFwiQmlsbGluZyBBY2NvdW50IElEXCIsXG4gICAgICAgICAgb3B0aW9ucyhwKSB7XG4gICAgICAgICAgICBwLnJlcXVpcmVkID0gdHJ1ZTtcbiAgICAgICAgICB9LFxuICAgICAgICB9KTtcbiAgICAgICAgcC5wcm9wZXJ0aWVzLmFkZFRleHQoe1xuICAgICAgICAgIG5hbWU6IFwib3JnYW5pemF0aW9uSWRcIixcbiAgICAgICAgICBsYWJlbDogXCJPcmdhbml6YXRpb24gSURcIixcbiAgICAgICAgICBvcHRpb25zKHApIHtcbiAgICAgICAgICAgIHAucmVxdWlyZWQgPSB0cnVlO1xuICAgICAgICAgIH0sXG4gICAgICAgIH0pO1xuICAgICAgICBwLnByb3BlcnRpZXMuYWRkVGV4dCh7XG4gICAgICAgICAgbmFtZTogXCJ3b3Jrc3BhY2VJZFwiLFxuICAgICAgICAgIGxhYmVsOiBcIk9yZ2FuaXphdGlvbiBJRFwiLFxuICAgICAgICAgIG9wdGlvbnMocCkge1xuICAgICAgICAgICAgcC5yZXF1aXJlZCA9IHRydWU7XG4gICAgICAgICAgfSxcbiAgICAgICAgfSk7XG4gICAgICAgIHAucHJvcGVydGllcy5hZGRUZXh0KHtcbiAgICAgICAgICBuYW1lOiBcImNoYW5nZVNldElkXCIsXG4gICAgICAgICAgbGFiZWw6IFwiQ2hhbmdlIFNldCBJRFwiLFxuICAgICAgICAgIG9wdGlvbnMocCkge1xuICAgICAgICAgICAgcC5yZXF1aXJlZCA9IHRydWU7XG4gICAgICAgICAgfSxcbiAgICAgICAgfSk7XG4gICAgICB9LFxuICAgIH0pO1xuXG4gICAgYy5maWVsZHMuYWRkVGV4dCh7XG4gICAgICBuYW1lOiBcImNyZWF0ZWRCeVVzZXJJZFwiLFxuICAgICAgbGFiZWw6IFwiVXNlciBJRCB3aG8gY3JlYXRlZCB0aGlzIENoYW5nZSBTZXQgRW50cnlcIixcbiAgICAgIG9wdGlvbnMocCkge1xuICAgICAgICBwLnJlcXVpcmVkID0gdHJ1ZTtcbiAgICAgIH0sXG4gICAgfSk7XG5cbiAgICBjLmZpZWxkcy5hZGRUZXh0KHtcbiAgICAgIG5hbWU6IFwiaXRlbUlkXCIsXG4gICAgICBsYWJlbDogXCJUaGUgSUQgb2YgdGhlIGl0ZW0gdGhpcyBDaGFuZ2UgU2V0IEVudHJ5IHBvaW50cyBhdFwiLFxuICAgICAgb3B0aW9ucyhwKSB7XG4gICAgICAgIHAucmVxdWlyZWQgPSB0cnVlO1xuICAgICAgfSxcbiAgICB9KTtcblxuICAgIGMuZmllbGRzLmFkZEVudW0oe1xuICAgICAgbmFtZTogXCJzdGF0dXNcIixcbiAgICAgIGxhYmVsOiBcIlRoZSBzdGF0dXMgb2YgdGhpcyBDaGFuZ2UgU2V0IEVudHJ5XCIsXG4gICAgICBvcHRpb25zKHA6IFByb3BFbnVtKSB7XG4gICAgICAgIHAudmFyaWFudHMgPSBbXCJvcGVuXCIsIFwiY2xvc2VkXCIsIFwiYWJhbmRvbmVkXCJdO1xuICAgICAgICBwLmJhc2VEZWZhdWx0VmFsdWUgPSBcIm9wZW5cIjtcbiAgICAgIH0sXG4gICAgfSk7XG5cbiAgICBjLmFkZExpc3RNZXRob2QoKTtcbiAgICBjLmFkZEdldE1ldGhvZCgpO1xuXG4gICAgYy5tZXRob2RzLmFkZE1ldGhvZCh7XG4gICAgICBuYW1lOiBcImNyZWF0ZVwiLFxuICAgICAgbGFiZWw6IFwiQ3JlYXRlIGEgQ2hhbmdlIFNldCBFbnRyeVwiLFxuICAgICAgb3B0aW9ucyhwOiBQcm9wTWV0aG9kKSB7XG4gICAgICAgIHAubXV0YXRpb24gPSB0cnVlO1xuICAgICAgICBwLmhpZGRlbiA9IHRydWU7XG4gICAgICAgIHAuc2tpcCA9IHRydWU7XG4gICAgICAgIHAuaXNQcml2YXRlID0gdHJ1ZTtcblxuICAgICAgICBwLnJlcXVlc3QucHJvcGVydGllcy5hZGRUZXh0KHtcbiAgICAgICAgICBuYW1lOiBcIm5hbWVcIixcbiAgICAgICAgICBsYWJlbDogXCJOYW1lIG9mIHRoZSBjaGFuZ2VzZXQgZW50cnlcIixcbiAgICAgICAgICBvcHRpb25zKHApIHtcbiAgICAgICAgICAgIHAucmVxdWlyZWQgPSB0cnVlO1xuICAgICAgICAgIH0sXG4gICAgICAgIH0pO1xuICAgICAgICBwLnJlcXVlc3QucHJvcGVydGllcy5hZGRUZXh0KHtcbiAgICAgICAgICBuYW1lOiBcImRpc3BsYXlOYW1lXCIsXG4gICAgICAgICAgbGFiZWw6IFwiQ2hhbmdlIFNldCBlbnRyeSBkaXNwbGF5IG5hbWVcIixcbiAgICAgICAgICBvcHRpb25zKHApIHtcbiAgICAgICAgICAgIHAucmVxdWlyZWQgPSB0cnVlO1xuICAgICAgICAgIH0sXG4gICAgICAgIH0pO1xuICAgICAgICBwLnJlcXVlc3QucHJvcGVydGllcy5hZGRMaW5rKHtcbiAgICAgICAgICBuYW1lOiBcInNpUHJvcGVydGllc1wiLFxuICAgICAgICAgIGxhYmVsOiBcIlRoZSBTSSBQcm9wZXJ0aWVzIGZvciB0aGlzIENoYW5nZSBTZXQgRW50cnlcIixcbiAgICAgICAgICBvcHRpb25zKHA6IFByb3BMaW5rKSB7XG4gICAgICAgICAgICBwLnJlcXVpcmVkID0gdHJ1ZTtcbiAgICAgICAgICAgIHAubG9va3VwID0ge1xuICAgICAgICAgICAgICB0eXBlTmFtZTogXCJjaGFuZ2VTZXRFbnRyeVwiLFxuICAgICAgICAgICAgICBuYW1lczogW1wic2lQcm9wZXJ0aWVzXCJdLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICB9LFxuICAgICAgICB9KTtcbiAgICAgICAgcC5yZXF1ZXN0LnByb3BlcnRpZXMuYWRkVGV4dCh7XG4gICAgICAgICAgbmFtZTogXCJjcmVhdGVkQnlVc2VySWRcIixcbiAgICAgICAgICBsYWJlbDogXCJVc2VyIElEIHdobyBjcmVhdGVkIHRoaXMgQ2hhbmdlIFNldCBFbnRyeVwiLFxuICAgICAgICAgIG9wdGlvbnMocCkge1xuICAgICAgICAgICAgcC5yZXF1aXJlZCA9IHRydWU7XG4gICAgICAgICAgfSxcbiAgICAgICAgfSk7XG4gICAgICAgIHAucmVwbHkucHJvcGVydGllcy5hZGRMaW5rKHtcbiAgICAgICAgICBuYW1lOiBcIml0ZW1cIixcbiAgICAgICAgICBsYWJlbDogYCR7Yy5kaXNwbGF5VHlwZU5hbWV9IEl0ZW1gLFxuICAgICAgICAgIG9wdGlvbnMocDogUHJvcExpbmspIHtcbiAgICAgICAgICAgIHAubG9va3VwID0ge1xuICAgICAgICAgICAgICB0eXBlTmFtZTogXCJjaGFuZ2VTZXRFbnRyeVwiLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICB9LFxuICAgICAgICB9KTtcbiAgICAgIH0sXG4gICAgfSk7XG4gIH0sXG59KTtcbiJdfQ==
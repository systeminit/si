protoPackageName = "si.account"

service.Account.CreateAccount.skipauth = true
service.Account.CreateAccount.mutation = true
service.Account.CreateIntegrationInstance.mutation = true
service.Account.GetBillingAccount.query = true
service.Account.CreateUser.mutation = true
service.Account.GetUser.query = true
service.Account.ListUsers.query = true
service.Account.ListWorkspaces.query = true
service.Account.ListOrganizations.query = true
service.Account.ListIntegrations.query = true
service.Account.ListIntegrationInstances.query = true

message.LoginRequest.skip = true
message.LoginReply.skip = true
message.User.passwordHash.skip = true

[message.User.billingAccountId.has_one]
to = "billingAccount"
grpcServiceName = "Account"
method = "GetBillingAccount"
type = "BillingAccount"

[[message.BillingAccount.id.has_many]]
to = "users"
grpcServiceName = "Account"
method = "ListUsers"
type = "ListUsersReply"
inputType = "ListUsersRequest"

[[message.BillingAccount.id.has_many]]
to = "organizations"
grpcServiceName = "Account"
method = "ListOrganizations"
type = "ListOrganizationsReply"
inputType = "ListOrganizationsRequest"

[[message.BillingAccount.id.has_many]]
to = "integrationInstances"
grpcServiceName = "Account"
method = "ListIntegrationInstances"
type = "ListIntegrationInstancesReply"
inputType = "ListIntegrationInstancesRequest"

[message.Organization.billingAccountId.has_one]
to = "billingAccount"
grpcServiceName = "Account"
method = "GetBillingAccount"
type = "BillingAccount"

[[message.Organization.id.in_list]]
to = "enabledIntegrationInstances"
listField = "enabledOnOrganizationIds"
grpcServiceName = "Account"
method = "ListIntegrationInstances"
type = "ListIntegrationInstancesReply"
inputType = "ListIntegrationInstancesRequest"

[[message.Organization.id.has_many]]
to = "workspaces"
grpcServiceName = "Account"
method = "ListWorkspaces"
type = "ListWorkspacesReply"
inputType = "ListWorkspacesRequest"

[message.Workspace.billingAccountId.has_one]
to = "billingAccount"
grpcServiceName = "Account"
method = "GetBillingAccount"
type = "BillingAccount"

[message.Workspace.organizationId.has_one]
to = "organization"
grpcServiceName = "Account"
method = "GetOrganization"
type = "Organization"

[[message.Workspace.id.in_list]]
to = "enabledIntegrationInstances"
listField = "enabledOnWorkspaceIds"
grpcServiceName = "Account"
method = "ListIntegrationInstances"
type = "ListIntegrationInstancesReply"
inputType = "ListIntegrationInstancesRequest"

#[message.Workspace.organizationAccountId.has_one]
#to = "billingAccount"
#grpcServiceName = "Account"
#method = "GetBillingAccount"
#type = "BillingAccount"

[[message.Integration.id.has_many]]
to = "integrationServices"
grpcServiceName = "Account"
method = "ListIntegrationServices"
type = "ListIntegrationServicesReply"
inputType = "ListIntegrationServicesRequest"

# [[message.Integration.id.has_many]]
# to = "sshKeyComponents"
# grpcServiceName = "SshKey"
# method = "ListSshKeys"
# type = "ListSshKeysReply"
# inputType = "ListSshKeysRequest"

[message.IntegrationService.integrationId.has_one]
to = "integration"
grpcServiceName = "Account"
method = "GetIntegration"
type = "Integration"

[message.IntegrationInstance.integrationId.has_one]
to = "integration"
grpcServiceName = "Account"
method = "GetIntegration"
type = "Integration"

[message.IntegrationInstance.billingAccountId.has_one]
to = "billingAccount"
grpcServiceName = "Account"
method = "GetBillingAccount"
type = "BillingAccount"

[message.IntegrationInstance.enabledOnWorkspaceIds.has_list]
to = "enabledOnWorkspaces"
grpcServiceName = "Account"
method = "ListWorkspaces"
type = "ListWorkspacesReply"
inputType = "ListWorkspacesRequest"

[message.IntegrationInstance.enabledOnOrganizationIds.has_list]
to = "enabledOnOrganizations"
grpcServiceName = "Account"
method = "ListOrganizations"
type = "ListOrganizationsReply"
inputType = "ListOrganizationsRequest"


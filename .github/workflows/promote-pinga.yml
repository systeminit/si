name: promote-pinga

on:
  push:
    branches:
      - main
    paths:
      - .github/workflows/promote-image.yml
      - .github/workflows/promote-pinga.yml
      - .cargo/**
      - Cargo.*
      - bin/pinga/**
      - lib/config-file/**
      - lib/dal/**
      - lib/ping-server/**
      - lib/si-data-faktory/**
      - lib/si-data-nats/**
      - lib/si-data-pg/**
      - lib/si-settings/**
      - lib/si-std/**
      - lib/telemetry-application-rs/**
      - lib/telemetry-rs/**
      - lib/veritech-client/**
      - lib/veritech-core/**
      - rust-toolchain
      - rustfmt.toml

jobs:
  promote:
    uses: ./.github/workflows/promote-image.yml
    with:
      component_name: bin/pinga
    secrets:
      SLACKBOT_TOKEN: ${{ secrets.SLACKBOT_TOKEN }}
      DOCKERHUB_USERNAME: ${{ secrets.DOCKERHUB_USERNAME }}
      DOCKERHUB_PASSWORD: ${{ secrets.DOCKERHUB_PASSWORD }}

load(
    "@prelude-si//:macros.bzl",
    "rust_binary",
    "rust_binary_artifact",
)

rust_binary(
    name = "bedrock",
    deps = [
        "//lib/bedrock-server:bedrock-server",
        "//lib/si-service:si-service",
        "//third-party/rust:clap",
    ],
    srcs = glob(["src/**/*.rs"]),
    env = {"CARGO_BIN_NAME": "bedrock"},
)

rust_binary_artifact(
    name = "bedrock",
    binary = ":bedrock"
)
